{
    "sourceFile": "src/lib/auth/strategies/LoadingStrategy.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1739006272486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739006286022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n   }\r\n \r\n   public end(error?: Error): void {\r\n     if (this.loadingId) {\r\n-      loadingMonitor.endLoading(this.loadingId, error);\r\n+      monitors.loadingMonitor.endLoading(this.loadingId, error);\r\n       this.loadingId = undefined;\r\n     }\r\n   }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739006309510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n   }\r\n \r\n   public end(error?: Error): void {\r\n     if (this.loadingId) {\r\n-      monitors.loadingMonitor.endLoading(this.loadingId, error);\r\n+      monitors.loadingMonitor.endLoading(this.loadingId);\r\n       this.loadingId = undefined;\r\n     }\r\n   }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739006346607,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,7 +38,9 @@\n   public end(error?: Error): void {\r\n     if (this.loadingId) {\r\n       monitors.loadingMonitor.endLoading(this.loadingId);\r\n       this.loadingId = undefined;\r\n+\r\n     }\r\n+\r\n   }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739025316561,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,16 +21,9 @@\n     const duration = performance.now() - this.startTime;\r\n     \r\n     if (!this.warned && duration > this.SLOW_THRESHOLD) {\r\n       if (warningCache.shouldLog(`slow:${this.component}`)) {\r\n-        logger.debug(`Loading progress: ${percent}%`, {\r\n-          context: { \r\n-            component: this.component,\r\n-            duration,\r\n-            threshold: this.SLOW_THRESHOLD\r\n-          },\r\n-          source: this.component\r\n-        });\r\n+        logger.debug(`Loading progress: ${percent}% - Duration: ${duration}ms (threshold: ${this.SLOW_THRESHOLD}ms)`, this.component);\r\n       }\r\n       this.warned = true;\r\n     }\r\n   }\r\n"
                }
            ],
            "date": 1739006272486,
            "name": "Commit-0",
            "content": "import { logger } from '../../logger';\r\nimport { monitors } from '../../monitoring';\r\nimport { WarningCache } from '../../monitoring/WarningCache';\r\n\r\nconst warningCache = new WarningCache(5000); // Reduced to 5 seconds\r\n\r\nexport class LoadingStrategy {\r\n  private loadingId?: string;\r\n  private startTime: number = 0;\r\n  private readonly SLOW_THRESHOLD = 1000; // Reduced to 1 second\r\n  private warned = false;\r\n\r\n  constructor(private component: string) {}\r\n\r\n  public async start(): Promise<void> {\r\n    this.startTime = performance.now();\r\n    this.loadingId = await monitors.loadingMonitor.startLoading(this.component);\r\n  }\r\n\r\n  public updateProgress(percent: number): void {\r\n    const duration = performance.now() - this.startTime;\r\n    \r\n    if (!this.warned && duration > this.SLOW_THRESHOLD) {\r\n      if (warningCache.shouldLog(`slow:${this.component}`)) {\r\n        logger.debug(`Loading progress: ${percent}%`, {\r\n          context: { \r\n            component: this.component,\r\n            duration,\r\n            threshold: this.SLOW_THRESHOLD\r\n          },\r\n          source: this.component\r\n        });\r\n      }\r\n      this.warned = true;\r\n    }\r\n  }\r\n\r\n  public end(error?: Error): void {\r\n    if (this.loadingId) {\r\n      loadingMonitor.endLoading(this.loadingId, error);\r\n      this.loadingId = undefined;\r\n    }\r\n  }\r\n}"
        }
    ]
}