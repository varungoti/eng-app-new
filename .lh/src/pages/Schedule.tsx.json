{
    "sourceFile": "src/pages/Schedule.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1740752846603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740753411759,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,18 +2,15 @@\n import { Calendar, Plus, Edit, Trash2, Upload, Book } from 'lucide-react';\r\n import type { Class } from '../types';\r\n import { useAuth } from '../hooks/useAuth';\r\n import ScheduleImport from '../components/schedule/ScheduleImport';\r\n-import { TaskCalendar } from '../components/schedule/TaskCalendar';\r\n-import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\n-import { Button } from '@/components/ui/button';\r\n+import TaskCalendar from '../components/calendar/TaskCalendar';\r\n \r\n const Schedule = () => {\r\n   const { user } = useAuth();\r\n   const [classes, setClasses] = useState<Class[]>([]);\r\n   const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n   const [isImportModalOpen, setIsImportModalOpen] = useState(false);\r\n-  const [activeTab, setActiveTab] = useState('calendar');\r\n \r\n   // Show class schedule for school roles, task calendar for others\r\n   const showClassSchedule = ['school_leader', 'school_principal', 'teacher_head'].includes(user?.role || '');\r\n \r\n@@ -40,144 +37,102 @@\n     setClasses([...classes, ...newSchedules]);\r\n     setIsImportModalOpen(false);\r\n   };\r\n \r\n-  const handleEditClass = (classId: string) => {\r\n-    // Implementation would go here\r\n-    console.log('Editing class', classId);\r\n-  };\r\n-\r\n-  const handleDeleteClass = (classId: string) => {\r\n-    setClasses(classes.filter((c) => c.id !== classId));\r\n-  };\r\n-\r\n   return (\r\n-    <div className=\"container mx-auto px-4 py-8\">\r\n+    <div>\r\n       <div className=\"flex justify-between items-center mb-6\">\r\n         <div>\r\n           <h1 className=\"text-2xl font-semibold text-gray-900\">\r\n-            Schedule Management\r\n+            {showClassSchedule ? 'Class Schedule' : 'Task Calendar'}\r\n           </h1>\r\n           <p className=\"mt-1 text-sm text-gray-500\">\r\n-            Manage schedules, classes and tasks in one place\r\n+            {showClassSchedule \r\n+              ? 'Manage and view class schedules' \r\n+              : 'Manage your tasks and daily schedule'}\r\n           </p>\r\n         </div>\r\n         <div className=\"flex space-x-4\">\r\n-          {showClassSchedule && (\r\n-            <>\r\n-              <Button\r\n-                variant=\"outline\"\r\n-                onClick={() => setIsImportModalOpen(true)}\r\n-                className=\"gap-2\"\r\n-              >\r\n-                <Upload className=\"h-4 w-4\" />\r\n-                <span>Import Schedules</span>\r\n-              </Button>\r\n-              <Button\r\n-                onClick={() => setIsAddModalOpen(true)}\r\n-                className=\"gap-2\"\r\n-              >\r\n-                <Plus className=\"h-4 w-4\" />\r\n-                <span>Add Class</span>\r\n-              </Button>\r\n-            </>\r\n-          )}\r\n+          {showClassSchedule ? (\r\n+            <button\r\n+              onClick={() => setIsImportModalOpen(true)}\r\n+              className=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\r\n+            >\r\n+              <Upload className=\"h-4 w-4 mr-2\" />\r\n+              Import Schedules\r\n+            </button>\r\n+          ) : null}\r\n+          {showClassSchedule ? (\r\n+            <button\r\n+              onClick={() => setIsAddModalOpen(true)}\r\n+              className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n+            >\r\n+              <Plus className=\"h-4 w-4 mr-2\" />\r\n+              Add Class\r\n+            </button>\r\n+          ) : null}\r\n         </div>\r\n       </div>\r\n \r\n       {showClassSchedule ? (\r\n-        <Tabs defaultValue=\"classes\" className=\"w-full\">\r\n-          <TabsList className=\"mb-6\">\r\n-            <TabsTrigger value=\"classes\">Class Schedule</TabsTrigger>\r\n-            <TabsTrigger value=\"calendar\">Task Calendar</TabsTrigger>\r\n-          </TabsList>\r\n-          \r\n-          <TabsContent value=\"classes\">\r\n-            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n-              {classes.length === 0 ? (\r\n-                <div className=\"p-8 text-center\">\r\n-                  <Calendar className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n-                  <p className=\"text-lg font-medium text-gray-700\">No classes added yet</p>\r\n-                  <p className=\"text-sm text-gray-500 mt-1 mb-6\">Add your first class to get started</p>\r\n-                  <Button\r\n-                    onClick={() => setIsAddModalOpen(true)}\r\n-                    className=\"gap-2\"\r\n-                  >\r\n-                    <Plus className=\"h-4 w-4\" />\r\n-                    <span>Add First Class</span>\r\n-                  </Button>\r\n-                </div>\r\n-              ) : (\r\n-                <ul className=\"divide-y divide-gray-200\">\r\n-                  {classes.map((classItem) => (\r\n-                    <li key={classItem.id}>\r\n-                      <div className=\"px-4 py-4 flex items-center sm:px-6\">\r\n-                        <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\r\n-                          <div>\r\n-                            <div className=\"flex items-center\">\r\n-                              <Calendar className=\"h-6 w-6 text-indigo-600 mr-3\" />\r\n-                              <div>\r\n-                                <div className=\"text-sm font-medium text-indigo-600\">\r\n-                                  Grade {classItem.gradeId}\r\n-                                </div>\r\n-                                <div className=\"text-sm text-gray-500\">\r\n-                                  Teacher ID: {classItem.teacherId}\r\n-                                </div>\r\n-                              </div>\r\n-                            </div>\r\n-                            <div className=\"mt-2\">\r\n-                              {classItem.schedule.map((schedule, index) => (\r\n-                                <div\r\n-                                  key={index}\r\n-                                  className=\"text-sm text-gray-500\"\r\n-                                >\r\n-                                  {daysOfWeek[schedule.dayOfWeek]}: {schedule.startTime} -{' '}\r\n-                                  {schedule.endTime}\r\n-                                </div>\r\n-                              ))}\r\n-                            </div>\r\n+        <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n+          <ul className=\"divide-y divide-gray-200\">\r\n+            {classes.map((classItem) => (\r\n+              <li key={classItem.id}>\r\n+                <div className=\"px-4 py-4 flex items-center sm:px-6\">\r\n+                  <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\r\n+                    <div>\r\n+                      <div className=\"flex items-center\">\r\n+                        <Calendar className=\"h-6 w-6 text-indigo-600 mr-3\" />\r\n+                        <div>\r\n+                          <div className=\"text-sm font-medium text-indigo-600\">\r\n+                            Grade {classItem.gradeId}\r\n                           </div>\r\n-                          <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n-                            <div className=\"flex space-x-4\">\r\n-                              <Button\r\n-                                variant=\"ghost\"\r\n-                                size=\"sm\"\r\n-                                onClick={() => handleEditClass(classItem.id)}\r\n-                                aria-label={`Edit Grade ${classItem.gradeId} class`}\r\n-                              >\r\n-                                <Edit className=\"h-5 w-5\" />\r\n-                              </Button>\r\n-                              <Button\r\n-                                variant=\"ghost\"\r\n-                                size=\"sm\"\r\n-                                onClick={() => handleDeleteClass(classItem.id)}\r\n-                                aria-label={`Delete Grade ${classItem.gradeId} class`}\r\n-                                className=\"text-red-500 hover:text-red-700\"\r\n-                              >\r\n-                                <Trash2 className=\"h-5 w-5\" />\r\n-                              </Button>\r\n-                            </div>\r\n+                          <div className=\"text-sm text-gray-500\">\r\n+                            Teacher ID: {classItem.teacherId}\r\n                           </div>\r\n                         </div>\r\n                       </div>\r\n-                    </li>\r\n-                  ))}\r\n-                </ul>\r\n-              )}\r\n-            </div>\r\n-          </TabsContent>\r\n-          \r\n-          <TabsContent value=\"calendar\">\r\n-            <TaskCalendar />\r\n-          </TabsContent>\r\n-        </Tabs>\r\n+                      <div className=\"mt-2\">\r\n+                        {classItem.schedule.map((schedule, index) => (\r\n+                          <div\r\n+                            key={index}\r\n+                            className=\"text-sm text-gray-500\"\r\n+                          >\r\n+                            {daysOfWeek[schedule.dayOfWeek]}: {schedule.startTime} -{' '}\r\n+                            {schedule.endTime}\r\n+                          </div>\r\n+                        ))}\r\n+                      </div>\r\n+                    </div>\r\n+                    <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n+                      <div className=\"flex space-x-4\">\r\n+                        <button className=\"text-gray-400 hover:text-gray-500\">\r\n+                          <Edit className=\"h-5 w-5\" />\r\n+                        </button>\r\n+                        <button\r\n+                          onClick={() => {\r\n+                            setClasses(classes.filter((c) => c.id !== classItem.id));\r\n+                          }}\r\n+                          className=\"text-red-400 hover:text-red-500\"\r\n+                        >\r\n+                          <Trash2 className=\"h-5 w-5\" />\r\n+                        </button>\r\n+                      </div>\r\n+                    </div>\r\n+                  </div>\r\n+                </div>\r\n+              </li>\r\n+            ))}\r\n+          </ul>\r\n+        </div>\r\n       ) : (\r\n         <TaskCalendar />\r\n       )}\r\n \r\n       {/* Add Class Modal */}\r\n       {isAddModalOpen && (\r\n-        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50\">\r\n+        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center\">\r\n           <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\r\n             <h2 className=\"text-lg font-medium mb-4\">Add New Class</h2>\r\n             <form\r\n               onSubmit={(e) => {\r\n@@ -198,55 +153,47 @@\n               }}\r\n             >\r\n               <div className=\"space-y-4\">\r\n                 <div>\r\n-                  <label htmlFor=\"schoolId\" className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                     School ID\r\n                   </label>\r\n                   <input\r\n                     type=\"text\"\r\n                     name=\"schoolId\"\r\n-                    id=\"schoolId\"\r\n                     required\r\n-                    placeholder=\"Enter school identifier\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label htmlFor=\"gradeId\" className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                     Grade ID\r\n                   </label>\r\n                   <input\r\n                     type=\"text\"\r\n                     name=\"gradeId\"\r\n-                    id=\"gradeId\"\r\n                     required\r\n-                    placeholder=\"Enter grade identifier\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label htmlFor=\"teacherId\" className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                     Teacher ID\r\n                   </label>\r\n                   <input\r\n                     type=\"text\"\r\n                     name=\"teacherId\"\r\n-                    id=\"teacherId\"\r\n                     required\r\n-                    placeholder=\"Enter teacher identifier\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label htmlFor=\"dayOfWeek\" className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                     Day of Week\r\n                   </label>\r\n                   <select\r\n                     name=\"dayOfWeek\"\r\n-                    id=\"dayOfWeek\"\r\n                     required\r\n-                    aria-label=\"Select day of week\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   >\r\n                     {daysOfWeek.map((day, index) => (\r\n                       <option key={day} value={index}>\r\n@@ -255,49 +202,44 @@\n                     ))}\r\n                   </select>\r\n                 </div>\r\n                 <div>\r\n-                  <label htmlFor=\"startTime\" className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                     Start Time\r\n                   </label>\r\n                   <input\r\n                     type=\"time\"\r\n                     name=\"startTime\"\r\n-                    id=\"startTime\"\r\n                     required\r\n-                    placeholder=\"Select start time\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label htmlFor=\"endTime\" className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                     End Time\r\n                   </label>\r\n                   <input\r\n                     type=\"time\"\r\n                     name=\"endTime\"\r\n-                    id=\"endTime\"\r\n                     required\r\n-                    placeholder=\"Select end time\"\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo -500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n               </div>\r\n               <div className=\"mt-5 sm:mt-6 flex space-x-3\">\r\n-                <Button\r\n+                <button\r\n                   type=\"submit\"\r\n-                  className=\"w-full\"\r\n+                  className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                 >\r\n                   Add Class\r\n-                </Button>\r\n-                <Button\r\n+                </button>\r\n+                <button\r\n                   type=\"button\"\r\n-                  variant=\"outline\"\r\n                   onClick={() => setIsAddModalOpen(false)}\r\n-                  className=\"w-full\"\r\n+                  className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                 >\r\n                   Cancel\r\n-                </Button>\r\n+                </button>\r\n               </div>\r\n             </form>\r\n           </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1740755542306,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,8 +156,9 @@\n                 <div>\r\n                   <label className=\"block text-sm font-medium text-gray-700\">\r\n                     School ID\r\n                   </label>\r\n+                  <inp</label>\r\n                   <input\r\n                     type=\"text\"\r\n                     name=\"schoolId\"\r\n                     required\r\n"
                },
                {
                    "date": 1740755599122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -153,48 +153,51 @@\n               }}\r\n             >\r\n               <div className=\"space-y-4\">\r\n                 <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\" id=\"schoolId-label\">\r\n                     School ID\r\n                   </label>\r\n-                  <inp</label>\r\n                   <input\r\n                     type=\"text\"\r\n                     name=\"schoolId\"\r\n                     required\r\n+                    aria-labelledby=\"schoolId-label\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\" id=\"gradeId-label\">\r\n                     Grade ID\r\n                   </label>\r\n                   <input\r\n                     type=\"text\"\r\n                     name=\"gradeId\"\r\n                     required\r\n+                    aria-labelledby=\"gradeId-label\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\" id=\"teacherId-label\">\r\n                     Teacher ID\r\n                   </label>\r\n                   <input\r\n                     type=\"text\"\r\n                     name=\"teacherId\"\r\n                     required\r\n+                    aria-labelledby=\"teacherId-label\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\" id=\"dayOfWeek-label\">\r\n                     Day of Week\r\n                   </label>\r\n                   <select\r\n                     name=\"dayOfWeek\"\r\n                     required\r\n+                    aria-labelledby=\"dayOfWeek-label\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   >\r\n                     {daysOfWeek.map((day, index) => (\r\n                       <option key={day} value={index}>\r\n@@ -203,26 +206,28 @@\n                     ))}\r\n                   </select>\r\n                 </div>\r\n                 <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\" id=\"startTime-label\">\r\n                     Start Time\r\n                   </label>\r\n                   <input\r\n                     type=\"time\"\r\n                     name=\"startTime\"\r\n                     required\r\n+                    aria-labelledby=\"startTime-label\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n                 <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                  <label className=\"block text-sm font-medium text-gray-700\" id=\"endTime-label\">\r\n                     End Time\r\n                   </label>\r\n                   <input\r\n                     type=\"time\"\r\n                     name=\"endTime\"\r\n                     required\r\n+                    aria-labelledby=\"endTime-label\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo -500 focus:ring-indigo-500 sm:text-sm\"\r\n                   />\r\n                 </div>\r\n               </div>\r\n"
                },
                {
                    "date": 1740755626726,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,16 +24,16 @@\n     'Sunday',\r\n   ];\r\n \r\n   const handleAddClass = (classData: Omit<Class, 'id'>) => {\r\n-    setClasses([...classes, { ...classData, id: Date.now().toString() }]);\r\n+    setClasses([...classes, { ...classData, id: Number(Date.now().toString()) }]);\r\n     setIsAddModalOpen(false);\r\n   };\r\n \r\n   const handleImportSchedules = (schedules: Omit<Class, 'id'>[]) => {\r\n     const newSchedules = schedules.map(schedule => ({\r\n       ...schedule,\r\n-      id: Date.now().toString()\r\n+      id: Number(Date.now().toString())\r\n     }));\r\n     setClasses([...classes, ...newSchedules]);\r\n     setIsImportModalOpen(false);\r\n   };\r\n@@ -84,9 +84,9 @@\n                       <div className=\"flex items-center\">\r\n                         <Calendar className=\"h-6 w-6 text-indigo-600 mr-3\" />\r\n                         <div>\r\n                           <div className=\"text-sm font-medium text-indigo-600\">\r\n-                            Grade {classItem.gradeId}\r\n+                            Grade {classItem.grade_id}\r\n                           </div>\r\n                           <div className=\"text-sm text-gray-500\">\r\n                             Teacher ID: {classItem.teacherId}\r\n                           </div>\r\n@@ -105,16 +105,20 @@\n                       </div>\r\n                     </div>\r\n                     <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n                       <div className=\"flex space-x-4\">\r\n-                        <button className=\"text-gray-400 hover:text-gray-500\">\r\n+                        <button \r\n+                          className=\"text-gray-400 hover:text-gray-500\"\r\n+                          aria-label=\"Edit class\"\r\n+                        >\r\n                           <Edit className=\"h-5 w-5\" />\r\n                         </button>\r\n                         <button\r\n                           onClick={() => {\r\n                             setClasses(classes.filter((c) => c.id !== classItem.id));\r\n                           }}\r\n                           className=\"text-red-400 hover:text-red-500\"\r\n+                          aria-label=\"Delete class\"\r\n                         >\r\n                           <Trash2 className=\"h-5 w-5\" />\r\n                         </button>\r\n                       </div>\r\n@@ -139,9 +143,9 @@\n                 e.preventDefault();\r\n                 const formData = new FormData(e.currentTarget);\r\n                 handleAddClass({\r\n                   schoolId: formData.get('schoolId') as string,\r\n-                  gradeId: formData.get('gradeId') as string,\r\n+                  grade_id: formData.get('gradeId') as string,\r\n                   teacherId: formData.get('teacherId') as string,\r\n                   schedule: [\r\n                     {\r\n                       dayOfWeek: parseInt(formData.get('dayOfWeek') as string),\r\n"
                },
                {
                    "date": 1740755693222,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -145,8 +145,14 @@\n                 handleAddClass({\r\n                   schoolId: formData.get('schoolId') as string,\r\n                   grade_id: formData.get('gradeId') as string,\r\n                   teacherId: formData.get('teacherId') as string,\r\n+                  name: \"\",\r\n+                  description: null,\r\n+                  section: null,\r\n+                  created_by: null,\r\n+                  created_at: new Date(),\r\n+                  updated_at: new Date(),\r\n                   schedule: [\r\n                     {\r\n                       dayOfWeek: parseInt(formData.get('dayOfWeek') as string),\r\n                       startTime: formData.get('startTime') as string,\r\n"
                },
                {
                    "date": 1740926805315,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useState } from 'react';\r\n-import { Calendar, Plus, Edit, Trash2, Upload, Book } from 'lucide-react';\r\n+import { Calendar, Plus, Edit, Trash2, Upload,   } from 'lucide-react';\r\n import type { Class } from '../types';\r\n import { useAuth } from '../hooks/useAuth';\r\n import ScheduleImport from '../components/schedule/ScheduleImport';\r\n import TaskCalendar from '../components/calendar/TaskCalendar';\r\n"
                }
            ],
            "date": 1740752846603,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport { Calendar, Plus, Edit, Trash2, Upload, Book } from 'lucide-react';\r\nimport type { Class } from '../types';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport ScheduleImport from '../components/schedule/ScheduleImport';\r\nimport { TaskCalendar } from '../components/schedule/TaskCalendar';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nconst Schedule = () => {\r\n  const { user } = useAuth();\r\n  const [classes, setClasses] = useState<Class[]>([]);\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isImportModalOpen, setIsImportModalOpen] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('calendar');\r\n\r\n  // Show class schedule for school roles, task calendar for others\r\n  const showClassSchedule = ['school_leader', 'school_principal', 'teacher_head'].includes(user?.role || '');\r\n\r\n  const daysOfWeek = [\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n    'Sunday',\r\n  ];\r\n\r\n  const handleAddClass = (classData: Omit<Class, 'id'>) => {\r\n    setClasses([...classes, { ...classData, id: Date.now().toString() }]);\r\n    setIsAddModalOpen(false);\r\n  };\r\n\r\n  const handleImportSchedules = (schedules: Omit<Class, 'id'>[]) => {\r\n    const newSchedules = schedules.map(schedule => ({\r\n      ...schedule,\r\n      id: Date.now().toString()\r\n    }));\r\n    setClasses([...classes, ...newSchedules]);\r\n    setIsImportModalOpen(false);\r\n  };\r\n\r\n  const handleEditClass = (classId: string) => {\r\n    // Implementation would go here\r\n    console.log('Editing class', classId);\r\n  };\r\n\r\n  const handleDeleteClass = (classId: string) => {\r\n    setClasses(classes.filter((c) => c.id !== classId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold text-gray-900\">\r\n            Schedule Management\r\n          </h1>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            Manage schedules, classes and tasks in one place\r\n          </p>\r\n        </div>\r\n        <div className=\"flex space-x-4\">\r\n          {showClassSchedule && (\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => setIsImportModalOpen(true)}\r\n                className=\"gap-2\"\r\n              >\r\n                <Upload className=\"h-4 w-4\" />\r\n                <span>Import Schedules</span>\r\n              </Button>\r\n              <Button\r\n                onClick={() => setIsAddModalOpen(true)}\r\n                className=\"gap-2\"\r\n              >\r\n                <Plus className=\"h-4 w-4\" />\r\n                <span>Add Class</span>\r\n              </Button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {showClassSchedule ? (\r\n        <Tabs defaultValue=\"classes\" className=\"w-full\">\r\n          <TabsList className=\"mb-6\">\r\n            <TabsTrigger value=\"classes\">Class Schedule</TabsTrigger>\r\n            <TabsTrigger value=\"calendar\">Task Calendar</TabsTrigger>\r\n          </TabsList>\r\n          \r\n          <TabsContent value=\"classes\">\r\n            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n              {classes.length === 0 ? (\r\n                <div className=\"p-8 text-center\">\r\n                  <Calendar className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-lg font-medium text-gray-700\">No classes added yet</p>\r\n                  <p className=\"text-sm text-gray-500 mt-1 mb-6\">Add your first class to get started</p>\r\n                  <Button\r\n                    onClick={() => setIsAddModalOpen(true)}\r\n                    className=\"gap-2\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                    <span>Add First Class</span>\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <ul className=\"divide-y divide-gray-200\">\r\n                  {classes.map((classItem) => (\r\n                    <li key={classItem.id}>\r\n                      <div className=\"px-4 py-4 flex items-center sm:px-6\">\r\n                        <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\r\n                          <div>\r\n                            <div className=\"flex items-center\">\r\n                              <Calendar className=\"h-6 w-6 text-indigo-600 mr-3\" />\r\n                              <div>\r\n                                <div className=\"text-sm font-medium text-indigo-600\">\r\n                                  Grade {classItem.gradeId}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-500\">\r\n                                  Teacher ID: {classItem.teacherId}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"mt-2\">\r\n                              {classItem.schedule.map((schedule, index) => (\r\n                                <div\r\n                                  key={index}\r\n                                  className=\"text-sm text-gray-500\"\r\n                                >\r\n                                  {daysOfWeek[schedule.dayOfWeek]}: {schedule.startTime} -{' '}\r\n                                  {schedule.endTime}\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n                            <div className=\"flex space-x-4\">\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleEditClass(classItem.id)}\r\n                                aria-label={`Edit Grade ${classItem.gradeId} class`}\r\n                              >\r\n                                <Edit className=\"h-5 w-5\" />\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleDeleteClass(classItem.id)}\r\n                                aria-label={`Delete Grade ${classItem.gradeId} class`}\r\n                                className=\"text-red-500 hover:text-red-700\"\r\n                              >\r\n                                <Trash2 className=\"h-5 w-5\" />\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </TabsContent>\r\n          \r\n          <TabsContent value=\"calendar\">\r\n            <TaskCalendar />\r\n          </TabsContent>\r\n        </Tabs>\r\n      ) : (\r\n        <TaskCalendar />\r\n      )}\r\n\r\n      {/* Add Class Modal */}\r\n      {isAddModalOpen && (\r\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\r\n            <h2 className=\"text-lg font-medium mb-4\">Add New Class</h2>\r\n            <form\r\n              onSubmit={(e) => {\r\n                e.preventDefault();\r\n                const formData = new FormData(e.currentTarget);\r\n                handleAddClass({\r\n                  schoolId: formData.get('schoolId') as string,\r\n                  gradeId: formData.get('gradeId') as string,\r\n                  teacherId: formData.get('teacherId') as string,\r\n                  schedule: [\r\n                    {\r\n                      dayOfWeek: parseInt(formData.get('dayOfWeek') as string),\r\n                      startTime: formData.get('startTime') as string,\r\n                      endTime: formData.get('endTime') as string,\r\n                    },\r\n                  ],\r\n                });\r\n              }}\r\n            >\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label htmlFor=\"schoolId\" className=\"block text-sm font-medium text-gray-700\">\r\n                    School ID\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"schoolId\"\r\n                    id=\"schoolId\"\r\n                    required\r\n                    placeholder=\"Enter school identifier\"\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"gradeId\" className=\"block text-sm font-medium text-gray-700\">\r\n                    Grade ID\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"gradeId\"\r\n                    id=\"gradeId\"\r\n                    required\r\n                    placeholder=\"Enter grade identifier\"\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"teacherId\" className=\"block text-sm font-medium text-gray-700\">\r\n                    Teacher ID\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"teacherId\"\r\n                    id=\"teacherId\"\r\n                    required\r\n                    placeholder=\"Enter teacher identifier\"\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"dayOfWeek\" className=\"block text-sm font-medium text-gray-700\">\r\n                    Day of Week\r\n                  </label>\r\n                  <select\r\n                    name=\"dayOfWeek\"\r\n                    id=\"dayOfWeek\"\r\n                    required\r\n                    aria-label=\"Select day of week\"\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  >\r\n                    {daysOfWeek.map((day, index) => (\r\n                      <option key={day} value={index}>\r\n                        {day}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"startTime\" className=\"block text-sm font-medium text-gray-700\">\r\n                    Start Time\r\n                  </label>\r\n                  <input\r\n                    type=\"time\"\r\n                    name=\"startTime\"\r\n                    id=\"startTime\"\r\n                    required\r\n                    placeholder=\"Select start time\"\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"endTime\" className=\"block text-sm font-medium text-gray-700\">\r\n                    End Time\r\n                  </label>\r\n                  <input\r\n                    type=\"time\"\r\n                    name=\"endTime\"\r\n                    id=\"endTime\"\r\n                    required\r\n                    placeholder=\"Select end time\"\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-5 sm:mt-6 flex space-x-3\">\r\n                <Button\r\n                  type=\"submit\"\r\n                  className=\"w-full\"\r\n                >\r\n                  Add Class\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={() => setIsAddModalOpen(false)}\r\n                  className=\"w-full\"\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Import Modal */}\r\n      {isImportModalOpen && (\r\n        <ScheduleImport\r\n          onImport={handleImportSchedules}\r\n          onClose={() => setIsImportModalOpen(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Schedule;"
        }
    ]
}