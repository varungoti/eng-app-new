{
    "sourceFile": "src/pages/Schools.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 28,
            "patches": [
                {
                    "date": 1739440467940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739440835968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,9 @@\n         type: 'branch' as const,\r\n         address: formData.get('address') as string,\r\n         latitude: parseFloat(formData.get('latitude') as string),\r\n         longitude: parseFloat(formData.get('longitude') as string),\r\n-        contact_number: formData.get('contactNumber') as string,\r\n+        contactNumber: formData.get('contactNumber') as string,\r\n         email: formData.get('email') as string,\r\n         status: formData.get('status') as 'active' | 'inactive',\r\n         capacity: {\r\n           total: parseInt(formData.get('capacity') as string),\r\n"
                },
                {
                    "date": 1739440855135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,9 +149,9 @@\n         capacity: {\r\n           total: parseInt(formData.get('capacity') as string),\r\n           current: 0\r\n         },\r\n-        principal_name: formData.get('principalName') as string,\r\n+        principalName: formData.get('principalName') as string,\r\n         schoolType: formData.get('schoolType') as 'public' | 'private' | 'charter' | 'religious' | 'other',\r\n         schoolLevel: formData.get('schoolLevel') as 'elementary' | 'middle' | 'high' | 'other',\r\n         schoolLeader: formData.get('principalName') as string,\r\n         schoolLeaderTitle: 'Principal',\r\n"
                },
                {
                    "date": 1739440884434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -245,8 +245,10 @@\n                           setSelectedSchool(school);\r\n                           setIsAddBranchOpen(true);\r\n                         }}\r\n                         className=\"text-indigo-600 hover:text-indigo-700\"\r\n+                        aria-label=\"Add branch school\"\r\n+                        title=\"Add branch school\"\r\n                       >\r\n                         <Plus className=\"h-5 w-5\" />\r\n                       </button>\r\n                       <button\r\n"
                },
                {
                    "date": 1739440904513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -408,14 +408,16 @@\n                       placeholder=\"Enter email address\"\r\n                     />\r\n                   </div>\r\n                   <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700\">\r\n                       Status\r\n                     </label>\r\n                     <select\r\n+                      id=\"status\"\r\n                       name=\"status\"\r\n                       required\r\n+                      aria-label=\"School Status\"\r\n                       className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                     >\r\n                       <option value=\"active\">Active</option>\r\n                       <option value=\"inactive\">Inactive</option>\r\n"
                },
                {
                    "date": 1739440930617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -423,14 +423,17 @@\n                       <option value=\"inactive\">Inactive</option>\r\n                     </select>\r\n                   </div>\r\n                   <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    <label htmlFor=\"capacity\" className=\"block text-sm font-medium text-gray-700\">\r\n                       Student Capacity\r\n                     </label>\r\n                     <input\r\n+                      id=\"capacity\"\r\n                       type=\"number\"\r\n                       name=\"capacity\"\r\n+                      placeholder=\"Enter total student capacity\"\r\n+                      aria-label=\"Student Capacity\"\r\n                       className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                       required\r\n                     />\r\n                   </div>\r\n"
                },
                {
                    "date": 1739440936756,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -441,10 +441,12 @@\n                     <label className=\"block text-sm font-medium text-gray-700\">\r\n                       School Type\r\n                     </label>\r\n                     <select\r\n+                      id=\"schoolType\"\r\n                       name=\"schoolType\"\r\n                       required\r\n+                      aria-label=\"School Type\"\r\n                       className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                     >\r\n                       <option value=\"public\">Public</option>\r\n                       <option value=\"private\">Private</option>\r\n"
                },
                {
                    "date": 1739440951464,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,704 @@\n+\"use client\";\r\n+\r\n+import React, { useState } from 'react';\r\n+import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n+import type { School as SchoolType } from '../types';\r\n+import LocationSearch from '../components/LocationSearch';\r\n+import EditSchoolDialog from '../components/EditSchoolDialog';\r\n+import { ScrollArea } from '../components/ui/scroll-area';\r\n+import { useError } from '../hooks/useError';\r\n+import GradeSelector from '../components/GradeSelector';\r\n+import { useSchools } from '../hooks/useSchools';\r\n+import { useToast } from '@/components/ui/use-toast';\r\n+import LoadingSpinner from '../components/LoadingSpinner';\r\n+import { Dialog } from '@/components/ui/dialog';\r\n+\r\n+const isSchool = (school: unknown): school is SchoolType => {\r\n+  return typeof school === 'object' && school !== null && 'type' in school && 'id' in school;\r\n+};\r\n+\r\n+const Schools = () => {\r\n+  const { schools, loading, error, addSchool, updateSchool, deleteSchool } = useSchools();\r\n+  const { setError } = useError();\r\n+  const { toast } = useToast();\r\n+  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n+  const [selectedSchool, setSelectedSchool] = useState<SchoolType | null>(null);\r\n+  const [isAddBranchOpen, setIsAddBranchOpen] = useState(false);\r\n+  const [editingSchool, setEditingSchool] = useState<SchoolType | null>(null);\r\n+  const [selectedGrades, setSelectedGrades] = useState<string[]>([]);\r\n+  const [isLoading, setIsLoading] = useState(false);\r\n+\r\n+  const handleEditSchool = (updatedSchool: SchoolType) => {\r\n+    console.log('Updating school:', updatedSchool);\r\n+    updateSchool.mutate(updatedSchool);\r\n+    setEditingSchool(null);\r\n+  };\r\n+\r\n+  if (loading) {\r\n+    return <LoadingSpinner message=\"Loading schools...\" />;\r\n+  }\r\n+\r\n+  if (error) {\r\n+    return (\r\n+      <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n+        <h3 className=\"text-lg font-medium text-red-800\">Error</h3>\r\n+        <p className=\"mt-2 text-sm text-red-600\">{error}</p>\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  const handleAddSchool = async (formData: FormData) => {\r\n+    const latitude = parseFloat(formData.get('latitude') as string);\r\n+    const longitude = parseFloat(formData.get('longitude') as string);\r\n+    const address = formData.get('address') as string;\r\n+    \r\n+    // Validate form data\r\n+    if (isNaN(latitude) || isNaN(longitude)) {\r\n+      setError('Please select a valid location');\r\n+      return;\r\n+    }\r\n+    \r\n+    if (!address) {\r\n+      setError('Please enter a valid address');\r\n+      return;\r\n+    }\r\n+\r\n+    // Create school object\r\n+    const newSchool: Omit<SchoolType, 'id'> = {\r\n+      name: formData.get('name') as string,\r\n+      type: 'main' as const,\r\n+      address,\r\n+      latitude,\r\n+      longitude,\r\n+      contactNumber: formData.get('contactNumber') as string,\r\n+      email: formData.get('email') as string,\r\n+      status: formData.get('status') as 'active' | 'inactive',\r\n+      capacity: {\r\n+        total: parseInt(formData.get('capacity') as string),\r\n+        current: 0\r\n+      },\r\n+      principalName: formData.get('principalName') as string,\r\n+      grades: selectedGrades,\r\n+      schoolType: formData.get('schoolType') as 'public' | 'private' | 'charter' | 'religious' | 'other',\r\n+      schoolLevel: formData.get('schoolLevel') as 'elementary' | 'middle' | 'high' | 'other',\r\n+      schoolLeader: formData.get('principalName') as string,\r\n+      schoolLeaderTitle: 'Principal',\r\n+      schoolLeaderEmail: formData.get('leaderEmail') as string,\r\n+      schoolLeaderPhone: formData.get('leaderPhone') as string,\r\n+      operatingHours: {\r\n+        monday: { open: '8:00 AM', close: '3:00 PM' },\r\n+        tuesday: { open: '8:00 AM', close: '3:00 PM' },\r\n+        wednesday: { open: '8:00 AM', close: '3:00 PM' },\r\n+        thursday: { open: '8:00 AM', close: '3:00 PM' },\r\n+        friday: { open: '8:00 AM', close: '3:00 PM' },\r\n+        saturday: { open: '8:00 AM', close: '12:00 PM' },\r\n+        sunday: { open: 'Closed', close: 'Closed', isHoliday: true }\r\n+      },\r\n+      facilities: ['classroom', 'library'],\r\n+      curriculumType: ['standard'],\r\n+      languagesOffered: ['english'],\r\n+      transportationProvided: false,\r\n+      extracurricularActivities: [],\r\n+      classes: [],\r\n+      created_at: new Date().toISOString(),\r\n+      updated_at: new Date().toISOString(),\r\n+      studentCount: 0,\r\n+      staffCount: 0,\r\n+      classroomCount: 0,\r\n+      isBoarding: false\r\n+    };\r\n+    try {\r\n+      // Show loading state\r\n+      setIsLoading(true);\r\n+\r\n+      const result = await addSchool.mutateAsync(newSchool);\r\n+      if (result) {\r\n+        setIsAddModalOpen(false);\r\n+        setSelectedGrades([]);\r\n+        setError(null);\r\n+        \r\n+        // Show success message\r\n+        toast({\r\n+          title: \"Success\",\r\n+          description: \"School added successfully\",\r\n+        });\r\n+      }\r\n+    } catch (err) {\r\n+      setError(err instanceof Error ? err.message : 'Failed to add school');\r\n+      toast({\r\n+        variant: \"destructive\",\r\n+        title: \"Error\",\r\n+        description: \"Failed to add school\",\r\n+      });\r\n+    } finally {\r\n+      setIsLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleAddBranch = async (formData: FormData) => {\r\n+    if (selectedSchool) {\r\n+      const newBranch: Omit<SchoolType, 'id'> = {\r\n+        name: formData.get('name') as string,\r\n+        type: 'branch' as const,\r\n+        address: formData.get('address') as string,\r\n+        latitude: parseFloat(formData.get('latitude') as string),\r\n+        longitude: parseFloat(formData.get('longitude') as string),\r\n+        contactNumber: formData.get('contactNumber') as string,\r\n+        email: formData.get('email') as string,\r\n+        status: formData.get('status') as 'active' | 'inactive',\r\n+        capacity: {\r\n+          total: parseInt(formData.get('capacity') as string),\r\n+          current: 0\r\n+        },\r\n+        principalName: formData.get('principalName') as string,\r\n+        schoolType: formData.get('schoolType') as 'public' | 'private' | 'charter' | 'religious' | 'other',\r\n+        schoolLevel: formData.get('schoolLevel') as 'elementary' | 'middle' | 'high' | 'other',\r\n+        schoolLeader: formData.get('principalName') as string,\r\n+        schoolLeaderTitle: 'Principal',\r\n+        schoolLeaderEmail: formData.get('leaderEmail') as string,\r\n+        schoolLeaderPhone: formData.get('leaderPhone') as string,\r\n+        operatingHours: {\r\n+          monday: { open: '8:00 AM', close: '3:00 PM' },\r\n+          tuesday: { open: '8:00 AM', close: '3:00 PM' },\r\n+          wednesday: { open: '8:00 AM', close: '3:00 PM' },\r\n+          thursday: { open: '8:00 AM', close: '3:00 PM' },\r\n+          friday: { open: '8:00 AM', close: '3:00 PM' },\r\n+          saturday: { open: '8:00 AM', close: '12:00 PM' },\r\n+          sunday: { open: 'Closed', close: 'Closed', isHoliday: true }\r\n+        },\r\n+        facilities: ['classroom', 'library'],\r\n+        curriculumType: ['standard'],\r\n+        languagesOffered: ['english'],\r\n+        transportationProvided: false,\r\n+        extracurricularActivities: [],\r\n+        classes: [],\r\n+        created_at: new Date().toISOString(),\r\n+        updated_at: new Date().toISOString(),\r\n+        studentCount: 0,\r\n+        staffCount: 0,\r\n+        classroomCount: 0,\r\n+        isBoarding: false,\r\n+        parentId: selectedSchool.id,\r\n+        grades: selectedGrades\r\n+      };\r\n+      await addSchool.mutateAsync(newBranch);\r\n+      setIsAddBranchOpen(false);\r\n+      setSelectedGrades([]);\r\n+    }\r\n+  };\r\n+\r\n+  return (\r\n+    <div>\r\n+      <div className=\"flex justify-between items-center mb-6\">\r\n+        <h1 className=\"text-2xl font-semibold text-gray-900\">Schools</h1>\r\n+        <div className=\"flex space-x-4\">\r\n+          <button\r\n+            onClick={() => setIsAddModalOpen(true)}\r\n+            className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n+          >\r\n+            <Plus className=\"h-4 w-4 mr-2\" />\r\n+            Add School\r\n+          </button>\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\r\n+        {schools\r\n+          .filter((school): school is SchoolType => {\r\n+            if (!isSchool(school)) return false;\r\n+            return school.type !== 'branch';\r\n+          })\r\n+          .map((school) => (\r\n+            <div key={school.id} className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n+              <div className=\"px-4 py-4 flex items-center sm:px-6\">\r\n+                <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\r\n+                  <div>\r\n+                    <div className=\"flex items-center\">\r\n+                      <School className=\"h-6 w-6 text-indigo-600 mr-3\" />\r\n+                      <div className=\"text-lg font-medium text-indigo-600\">\r\n+                        {school.name}\r\n+                      </div>\r\n+                    </div>\r\n+                    <div className=\"mt-4 space-y-2\">\r\n+                      <div className=\"flex items-center text-sm text-gray-600\">\r\n+                        <MapPin className=\"h-4 w-4 mr-2\" />\r\n+                        <span>{school.address}</span>\r\n+                      </div>\r\n+                      <div className=\"flex items-center text-sm text-gray-600\">\r\n+                        <Phone className=\"h-4 w-4 mr-2\" />\r\n+                        <span>{school.contactNumber}</span>\r\n+                      </div>\r\n+                      <div className=\"flex items-center text-sm text-gray-600\">\r\n+                        <Mail className=\"h-4 w-4 mr-2\" />\r\n+                        <span>{school.email}</span>\r\n+                      </div>\r\n+                      <div className=\"flex items-center text-sm text-gray-600\">\r\n+                        <User className=\"h-4 w-4 mr-2\" />\r\n+                        <span>{school.principalName}</span>\r\n+                      </div>\r\n+                    </div>\r\n+                  </div>\r\n+                  <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n+                    <div className=\"flex space-x-4\">\r\n+                      <button\r\n+                        onClick={() => {\r\n+                          setSelectedSchool(school);\r\n+                          setIsAddBranchOpen(true);\r\n+                        }}\r\n+                        className=\"text-indigo-600 hover:text-indigo-700\"\r\n+                        aria-label=\"Add branch school\"\r\n+                        title=\"Add branch school\"\r\n+                      >\r\n+                        <Plus className=\"h-5 w-5\" />\r\n+                      </button>\r\n+                      <button\r\n+                        onClick={() => {\r\n+                          setEditingSchool(school);\r\n+                          setSelectedGrades(school.grades || []);\r\n+                        }}\r\n+                        className=\"text-gray-400 hover:text-gray-500\"\r\n+                      >\r\n+                        <Edit className=\"h-5 w-5\" />\r\n+                      </button>\r\n+                      <button\r\n+                        onClick={() => {\r\n+                          deleteSchool.mutate(school.id);\r\n+                        }}\r\n+                        className=\"text-red-400 hover:text-red-500\"\r\n+                      >\r\n+                        <Trash2 className=\"h-5 w-5\" />\r\n+                      </button>\r\n+                    </div>\r\n+                  </div>\r\n+                </div>\r\n+              </div>\r\n+              {/* Branches */}\r\n+              <div className=\"border-t border-gray-200\">\r\n+                <div className=\"px-4 py-3\">\r\n+                  <h3 className=\"text-sm font-medium text-gray-600\">Branches</h3>\r\n+                  <div className=\"mt-2 space-y-2\">\r\n+                    {schools\r\n+                      .filter((branch): branch is SchoolType => \r\n+                        isSchool(branch) && \r\n+                        branch.type === 'branch' && \r\n+                        branch.parentId === school.id\r\n+                      )\r\n+                      .map((branch) => (\r\n+                        <div\r\n+                          key={branch.id}\r\n+                          className=\"flex items-center justify-between p-2 bg-gray-50 rounded-md\"\r\n+                        >\r\n+                          <div>\r\n+                            <div className=\"text-sm font-medium text-gray-900\">\r\n+                              {branch.name}\r\n+                            </div>\r\n+                            <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n+                          </div>\r\n+                          <div className=\"flex space-x-2\">\r\n+                            <button\r\n+                              onClick={() => {\r\n+                                setEditingSchool(branch);\r\n+                                setSelectedGrades(branch.grades || []);\r\n+                              }}\r\n+                              className=\"text-gray-400 hover:text-gray-500\"\r\n+                            >\r\n+                              <Edit className=\"h-4 w-4\" />\r\n+                            </button>\r\n+                            <button\r\n+                              onClick={() => {\r\n+                                deleteSchool.mutate(branch.id);\r\n+                              }}\r\n+                              className=\"text-red-400 hover:text-red-500\"\r\n+                            >\r\n+                              <Trash2 className=\"h-4 w-4\" />\r\n+                            </button>\r\n+                          </div>\r\n+                        </div>\r\n+                      ))}\r\n+                  </div>\r\n+                </div>\r\n+              </div>\r\n+            </div>\r\n+          ))}\r\n+      </div>\r\n+\r\n+      {/* Add School Modal */}\r\n+      {isAddModalOpen && (\r\n+        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center overflow-y-auto\">\r\n+          <div className=\"bg-white rounded-lg max-w-md w-full my-8 mx-4\">\r\n+            <div className=\"p-6 border-b\">\r\n+              <h2 className=\"text-lg font-medium\">Add New School</h2>\r\n+            </div>\r\n+            <ScrollArea className=\"h-[60vh]\">\r\n+              <div className=\"p-6\">\r\n+              <form\r\n+                id=\"addSchoolForm\"\r\n+                onSubmit={(e) => {\r\n+                  e.preventDefault();\r\n+                  handleAddSchool(new FormData(e.currentTarget));\r\n+                }}\r\n+              >\r\n+                <div className=\"space-y-4\">\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      School Name\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"text\"\r\n+                      name=\"name\"\r\n+                      required\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                      placeholder=\"Enter school name\"\r\n+                    />\r\n+                  </div>\r\n+                  <div className=\"space-y-2\">\r\n+                    <LocationSearch\r\n+                      onLocationSelect={({ lat, lng, address }) => {\r\n+                        const form = document.getElementById('addSchoolForm') as HTMLFormElement;\r\n+                        if (form) {\r\n+                          (form.elements.namedItem('latitude') as HTMLInputElement).value = lat.toString();\r\n+                          (form.elements.namedItem('longitude') as HTMLInputElement).value = lng.toString();\r\n+                          (form.elements.namedItem('address') as HTMLInputElement).value = address;\r\n+                        }\r\n+                      }}\r\n+                    />\r\n+                    <input type=\"hidden\" name=\"latitude\" required />\r\n+                    <input type=\"hidden\" name=\"longitude\" required />\r\n+                    <input type=\"hidden\" name=\"address\" required />\r\n+                  </div>\r\n+                  <div className=\"mt-4\">\r\n+                    <GradeSelector\r\n+                      selectedGrades={selectedGrades}\r\n+                      onChange={setSelectedGrades}\r\n+                    />\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      Principal Name\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"text\"\r\n+                      name=\"principalName\"\r\n+                      required\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                      placeholder=\"Enter principal's name\"\r\n+                    />\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      Contact Number\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"tel\"\r\n+                      name=\"contactNumber\"\r\n+                      required\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                      placeholder=\"Enter contact number\"\r\n+                    />\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      Email\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"email\"\r\n+                      name=\"email\"\r\n+                      required\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                      placeholder=\"Enter email address\"\r\n+                    />\r\n+                  </div>\r\n+                  <div>\r\n+                    <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700\">\r\n+                      Status\r\n+                    </label>\r\n+                    <select\r\n+                      id=\"status\"\r\n+                      name=\"status\"\r\n+                      required\r\n+                      aria-label=\"School Status\"\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    >\r\n+                      <option value=\"active\">Active</option>\r\n+                      <option value=\"inactive\">Inactive</option>\r\n+                    </select>\r\n+                  </div>\r\n+                  <div>\r\n+                    <label htmlFor=\"capacity\" className=\"block text-sm font-medium text-gray-700\">\r\n+                      Student Capacity\r\n+                    </label>\r\n+                    <input\r\n+                      id=\"capacity\"\r\n+                      type=\"number\"\r\n+                      name=\"capacity\"\r\n+                      placeholder=\"Enter total student capacity\"\r\n+                      aria-label=\"Student Capacity\"\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                      required\r\n+                    />\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      School Type\r\n+                    </label>\r\n+                    <select\r\n+                      id=\"schoolType\"\r\n+                      name=\"schoolType\"\r\n+                      required\r\n+                      aria-label=\"School Type\"\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    >\r\n+                      <option value=\"public\">Public</option>\r\n+                      <option value=\"private\">Private</option>\r\n+                      <option value=\"charter\">Charter</option>\r\n+                      <option value=\"religious\">Religious</option>\r\n+                      <option value=\"other\">Other</option>\r\n+                    </select>\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      School Level\r\n+                    </label>\r\n+                    <select\r\n+                      id=\"schoolLevel\"\r\n+                      name=\"schoolLevel\"\r\n+                      required\r\n+                      aria-label=\"School Level\"\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    >\r\n+                      <option value=\"elementary\">Elementary</option>\r\n+                      <option value=\"middle\">Middle</option>\r\n+                      <option value=\"high\">High</option>\r\n+                      <option value=\"other\">Other</option>\r\n+                    </select>\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      Leader Email\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"email\"\r\n+                      name=\"leaderEmail\"\r\n+                      required\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                      placeholder=\"Leader's email address\"\r\n+                    />\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      Leader Phone\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"tel\"\r\n+                      name=\"leaderPhone\"\r\n+                      required\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                      placeholder=\"Leader's phone number\"\r\n+                    />\r\n+                  </div>\r\n+                </div>\r\n+              </form>\r\n+              </div>\r\n+            </ScrollArea>\r\n+            <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n+              <div className=\"flex space-x-3\">\r\n+                <button\r\n+                  type=\"submit\"\r\n+                  form=\"addSchoolForm\"\r\n+                  className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n+                >\r\n+                  Add School\r\n+                </button>\r\n+                <button\r\n+                  type=\"button\"\r\n+                  onClick={() => setIsAddModalOpen(false)}\r\n+                  className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n+                >\r\n+                  Cancel\r\n+                </button>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      )}\r\n+\r\n+      {/* Add Branch Modal */}\r\n+      {isAddBranchOpen && selectedSchool && (\r\n+        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center\">\r\n+          <div className=\"bg-white rounded-lg max-w-md w-full max-h-[90vh] flex flex-col\">\r\n+            <div className=\"p-6\">\r\n+              <h2 className=\"text-lg font-medium mb-4\">\r\n+                Add Branch for {selectedSchool.name}\r\n+              </h2>\r\n+            </div>\r\n+            <div className=\"flex-1 overflow-y-auto px-6\">\r\n+            <form\r\n+              id=\"addBranchForm\"\r\n+              onSubmit={(e) => {\r\n+                e.preventDefault();\r\n+                const formData = new FormData(e.currentTarget);\r\n+                handleAddBranch(formData);\r\n+              }}\r\n+            >\r\n+              <div className=\"space-y-4\">\r\n+                <div>\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    Branch Name\r\n+                  </label>\r\n+                  <input\r\n+                    type=\"text\"\r\n+                    name=\"name\"\r\n+                    required\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    placeholder=\"Enter branch name\"\r\n+                  />\r\n+                </div>\r\n+                <div>\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    Address\r\n+                  </label>\r\n+                  <input\r\n+                    type=\"text\"\r\n+                    name=\"address\"\r\n+                    required\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    placeholder=\"Enter complete address\"\r\n+                  />\r\n+                </div>\r\n+                <div className=\"grid grid-cols-2 gap-4\">\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700\">\r\n+                      Location\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"number\"\r\n+                      step=\"any\"\r\n+                      name=\"latitude\"\r\n+                      required\r\n+                      placeholder=\"Latitude (e.g., 51.5074)\"\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    />\r\n+                  </div>\r\n+                  <div>\r\n+                    <label className=\"block text-sm font-medium text-gray-700 opacity-0\">\r\n+                      Location\r\n+                    </label>\r\n+                    <input\r\n+                      type=\"number\"\r\n+                      step=\"any\"\r\n+                      name=\"longitude\"\r\n+                      required\r\n+                      placeholder=\"Longitude (e.g., -0.1278)\"\r\n+                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    />\r\n+                  </div>\r\n+                </div>\r\n+                <div>\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    Principal Name\r\n+                  </label>\r\n+                  <input\r\n+                    type=\"text\"\r\n+                    name=\"principalName\"\r\n+                    required\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    placeholder=\"Enter principal's name\"\r\n+                  />\r\n+                </div>\r\n+                <div>\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    Contact Number\r\n+                  </label>\r\n+                  <input\r\n+                    type=\"tel\"\r\n+                    name=\"contactNumber\"\r\n+                    required\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    placeholder=\"Enter contact number\"\r\n+                  />\r\n+                </div>\r\n+                <div>\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    Email\r\n+                  </label>\r\n+                  <input\r\n+                    type=\"email\"\r\n+                    name=\"email\"\r\n+                    required\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    placeholder=\"Enter email address\"\r\n+                  />\r\n+                </div>\r\n+                <div>\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    Status\r\n+                  </label>\r\n+                  <select\r\n+                    id=\"status\"\r\n+                    name=\"status\"\r\n+                    required\r\n+                    aria-label=\"Branch Status\"\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                  >\r\n+                    <option value=\"active\">Active</option>\r\n+                    <option value=\"inactive\">Inactive</option>\r\n+                  </select>\r\n+                </div>\r\n+                <div>\r\n+                  <label className=\"block text-sm font-medium text-gray-700\">\r\n+                    Student Capacity\r\n+                  </label>\r\n+                  <input\r\n+                    type=\"number\"\r\n+                    name=\"capacity\"\r\n+                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n+                    required\r\n+                  />\r\n+                </div>\r\n+              </div>\r\n+            </form>\r\n+            </div>\r\n+            <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n+              <div className=\"flex space-x-3\">\r\n+                <button\r\n+                  type=\"submit\"\r\n+                  form=\"addBranchForm\"\r\n+                  className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n+                >\r\n+                  Add Branch\r\n+                </button>\r\n+                <button\r\n+                  type=\"button\"\r\n+                  onClick={() => {\r\n+                    setIsAddBranchOpen(false);\r\n+                    setSelectedSchool(null);\r\n+                  }}\r\n+                  className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n+                >\r\n+                  Cancel\r\n+                </button>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      )}\r\n+      \r\n+      {/* Edit School Dialog */}\r\n+      {editingSchool && (\r\n+        <EditSchoolDialog\r\n+          school={editingSchool}\r\n+          selectedGrades={selectedGrades}\r\n+          onGradesChange={setSelectedGrades}\r\n+          onSave={handleEditSchool}\r\n+          onCancel={() => {\r\n+            setEditingSchool(null);\r\n+            setSelectedGrades([]);\r\n+          }}\r\n+          open={!!editingSchool}\r\n+        />\r\n+      )}\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Schools;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739440960794,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -648,10 +648,13 @@\n                   <label className=\"block text-sm font-medium text-gray-700\">\r\n                     Student Capacity\r\n                   </label>\r\n                   <input\r\n+                    id=\"capacity\"\r\n                     type=\"number\"\r\n                     name=\"capacity\"\r\n+                    placeholder=\"Enter total student capacity\"\r\n+                    aria-label=\"Branch Student Capacity\"\r\n                     className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                     required\r\n                   />\r\n                 </div>\r\n@@ -700,705 +703,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default Schools;\n-\"use client\";\r\n-\r\n-import React, { useState } from 'react';\r\n-import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n-import type { School as SchoolType } from '../types';\r\n-import LocationSearch from '../components/LocationSearch';\r\n-import EditSchoolDialog from '../components/EditSchoolDialog';\r\n-import { ScrollArea } from '../components/ui/scroll-area';\r\n-import { useError } from '../hooks/useError';\r\n-import GradeSelector from '../components/GradeSelector';\r\n-import { useSchools } from '../hooks/useSchools';\r\n-import { useToast } from '@/components/ui/use-toast';\r\n-import LoadingSpinner from '../components/LoadingSpinner';\r\n-import { Dialog } from '@/components/ui/dialog';\r\n-\r\n-const isSchool = (school: unknown): school is SchoolType => {\r\n-  return typeof school === 'object' && school !== null && 'type' in school && 'id' in school;\r\n-};\r\n-\r\n-const Schools = () => {\r\n-  const { schools, loading, error, addSchool, updateSchool, deleteSchool } = useSchools();\r\n-  const { setError } = useError();\r\n-  const { toast } = useToast();\r\n-  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n-  const [selectedSchool, setSelectedSchool] = useState<SchoolType | null>(null);\r\n-  const [isAddBranchOpen, setIsAddBranchOpen] = useState(false);\r\n-  const [editingSchool, setEditingSchool] = useState<SchoolType | null>(null);\r\n-  const [selectedGrades, setSelectedGrades] = useState<string[]>([]);\r\n-  const [isLoading, setIsLoading] = useState(false);\r\n-\r\n-  const handleEditSchool = (updatedSchool: SchoolType) => {\r\n-    console.log('Updating school:', updatedSchool);\r\n-    updateSchool.mutate(updatedSchool);\r\n-    setEditingSchool(null);\r\n-  };\r\n-\r\n-  if (loading) {\r\n-    return <LoadingSpinner message=\"Loading schools...\" />;\r\n-  }\r\n-\r\n-  if (error) {\r\n-    return (\r\n-      <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n-        <h3 className=\"text-lg font-medium text-red-800\">Error</h3>\r\n-        <p className=\"mt-2 text-sm text-red-600\">{error}</p>\r\n-      </div>\r\n-    );\r\n-  }\r\n-\r\n-  const handleAddSchool = async (formData: FormData) => {\r\n-    const latitude = parseFloat(formData.get('latitude') as string);\r\n-    const longitude = parseFloat(formData.get('longitude') as string);\r\n-    const address = formData.get('address') as string;\r\n-    \r\n-    // Validate form data\r\n-    if (isNaN(latitude) || isNaN(longitude)) {\r\n-      setError('Please select a valid location');\r\n-      return;\r\n-    }\r\n-    \r\n-    if (!address) {\r\n-      setError('Please enter a valid address');\r\n-      return;\r\n-    }\r\n-\r\n-    // Create school object\r\n-    const newSchool: Omit<SchoolType, 'id'> = {\r\n-      name: formData.get('name') as string,\r\n-      type: 'main' as const,\r\n-      address,\r\n-      latitude,\r\n-      longitude,\r\n-      contactNumber: formData.get('contactNumber') as string,\r\n-      email: formData.get('email') as string,\r\n-      status: formData.get('status') as 'active' | 'inactive',\r\n-      capacity: {\r\n-        total: parseInt(formData.get('capacity') as string),\r\n-        current: 0\r\n-      },\r\n-      principalName: formData.get('principalName') as string,\r\n-      grades: selectedGrades,\r\n-      schoolType: formData.get('schoolType') as 'public' | 'private' | 'charter' | 'religious' | 'other',\r\n-      schoolLevel: formData.get('schoolLevel') as 'elementary' | 'middle' | 'high' | 'other',\r\n-      schoolLeader: formData.get('principalName') as string,\r\n-      schoolLeaderTitle: 'Principal',\r\n-      schoolLeaderEmail: formData.get('leaderEmail') as string,\r\n-      schoolLeaderPhone: formData.get('leaderPhone') as string,\r\n-      operatingHours: {\r\n-        monday: { open: '8:00 AM', close: '3:00 PM' },\r\n-        tuesday: { open: '8:00 AM', close: '3:00 PM' },\r\n-        wednesday: { open: '8:00 AM', close: '3:00 PM' },\r\n-        thursday: { open: '8:00 AM', close: '3:00 PM' },\r\n-        friday: { open: '8:00 AM', close: '3:00 PM' },\r\n-        saturday: { open: '8:00 AM', close: '12:00 PM' },\r\n-        sunday: { open: 'Closed', close: 'Closed', isHoliday: true }\r\n-      },\r\n-      facilities: ['classroom', 'library'],\r\n-      curriculumType: ['standard'],\r\n-      languagesOffered: ['english'],\r\n-      transportationProvided: false,\r\n-      extracurricularActivities: [],\r\n-      classes: [],\r\n-      created_at: new Date().toISOString(),\r\n-      updated_at: new Date().toISOString(),\r\n-      studentCount: 0,\r\n-      staffCount: 0,\r\n-      classroomCount: 0,\r\n-      isBoarding: false\r\n-    };\r\n-    try {\r\n-      // Show loading state\r\n-      setIsLoading(true);\r\n-\r\n-      const result = await addSchool.mutateAsync(newSchool);\r\n-      if (result) {\r\n-        setIsAddModalOpen(false);\r\n-        setSelectedGrades([]);\r\n-        setError(null);\r\n-        \r\n-        // Show success message\r\n-        toast({\r\n-          title: \"Success\",\r\n-          description: \"School added successfully\",\r\n-        });\r\n-      }\r\n-    } catch (err) {\r\n-      setError(err instanceof Error ? err.message : 'Failed to add school');\r\n-      toast({\r\n-        variant: \"destructive\",\r\n-        title: \"Error\",\r\n-        description: \"Failed to add school\",\r\n-      });\r\n-    } finally {\r\n-      setIsLoading(false);\r\n-    }\r\n-  };\r\n-\r\n-  const handleAddBranch = async (formData: FormData) => {\r\n-    if (selectedSchool) {\r\n-      const newBranch: Omit<SchoolType, 'id'> = {\r\n-        name: formData.get('name') as string,\r\n-        type: 'branch' as const,\r\n-        address: formData.get('address') as string,\r\n-        latitude: parseFloat(formData.get('latitude') as string),\r\n-        longitude: parseFloat(formData.get('longitude') as string),\r\n-        contactNumber: formData.get('contactNumber') as string,\r\n-        email: formData.get('email') as string,\r\n-        status: formData.get('status') as 'active' | 'inactive',\r\n-        capacity: {\r\n-          total: parseInt(formData.get('capacity') as string),\r\n-          current: 0\r\n-        },\r\n-        principalName: formData.get('principalName') as string,\r\n-        schoolType: formData.get('schoolType') as 'public' | 'private' | 'charter' | 'religious' | 'other',\r\n-        schoolLevel: formData.get('schoolLevel') as 'elementary' | 'middle' | 'high' | 'other',\r\n-        schoolLeader: formData.get('principalName') as string,\r\n-        schoolLeaderTitle: 'Principal',\r\n-        schoolLeaderEmail: formData.get('leaderEmail') as string,\r\n-        schoolLeaderPhone: formData.get('leaderPhone') as string,\r\n-        operatingHours: {\r\n-          monday: { open: '8:00 AM', close: '3:00 PM' },\r\n-          tuesday: { open: '8:00 AM', close: '3:00 PM' },\r\n-          wednesday: { open: '8:00 AM', close: '3:00 PM' },\r\n-          thursday: { open: '8:00 AM', close: '3:00 PM' },\r\n-          friday: { open: '8:00 AM', close: '3:00 PM' },\r\n-          saturday: { open: '8:00 AM', close: '12:00 PM' },\r\n-          sunday: { open: 'Closed', close: 'Closed', isHoliday: true }\r\n-        },\r\n-        facilities: ['classroom', 'library'],\r\n-        curriculumType: ['standard'],\r\n-        languagesOffered: ['english'],\r\n-        transportationProvided: false,\r\n-        extracurricularActivities: [],\r\n-        classes: [],\r\n-        created_at: new Date().toISOString(),\r\n-        updated_at: new Date().toISOString(),\r\n-        studentCount: 0,\r\n-        staffCount: 0,\r\n-        classroomCount: 0,\r\n-        isBoarding: false,\r\n-        parentId: selectedSchool.id,\r\n-        grades: selectedGrades\r\n-      };\r\n-      await addSchool.mutateAsync(newBranch);\r\n-      setIsAddBranchOpen(false);\r\n-      setSelectedGrades([]);\r\n-    }\r\n-  };\r\n-\r\n-  return (\r\n-    <div>\r\n-      <div className=\"flex justify-between items-center mb-6\">\r\n-        <h1 className=\"text-2xl font-semibold text-gray-900\">Schools</h1>\r\n-        <div className=\"flex space-x-4\">\r\n-          <button\r\n-            onClick={() => setIsAddModalOpen(true)}\r\n-            className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n-          >\r\n-            <Plus className=\"h-4 w-4 mr-2\" />\r\n-            Add School\r\n-          </button>\r\n-        </div>\r\n-      </div>\r\n-\r\n-      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\r\n-        {schools\r\n-          .filter((school): school is SchoolType => {\r\n-            if (!isSchool(school)) return false;\r\n-            return school.type !== 'branch';\r\n-          })\r\n-          .map((school) => (\r\n-            <div key={school.id} className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n-              <div className=\"px-4 py-4 flex items-center sm:px-6\">\r\n-                <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\r\n-                  <div>\r\n-                    <div className=\"flex items-center\">\r\n-                      <School className=\"h-6 w-6 text-indigo-600 mr-3\" />\r\n-                      <div className=\"text-lg font-medium text-indigo-600\">\r\n-                        {school.name}\r\n-                      </div>\r\n-                    </div>\r\n-                    <div className=\"mt-4 space-y-2\">\r\n-                      <div className=\"flex items-center text-sm text-gray-600\">\r\n-                        <MapPin className=\"h-4 w-4 mr-2\" />\r\n-                        <span>{school.address}</span>\r\n-                      </div>\r\n-                      <div className=\"flex items-center text-sm text-gray-600\">\r\n-                        <Phone className=\"h-4 w-4 mr-2\" />\r\n-                        <span>{school.contactNumber}</span>\r\n-                      </div>\r\n-                      <div className=\"flex items-center text-sm text-gray-600\">\r\n-                        <Mail className=\"h-4 w-4 mr-2\" />\r\n-                        <span>{school.email}</span>\r\n-                      </div>\r\n-                      <div className=\"flex items-center text-sm text-gray-600\">\r\n-                        <User className=\"h-4 w-4 mr-2\" />\r\n-                        <span>{school.principalName}</span>\r\n-                      </div>\r\n-                    </div>\r\n-                  </div>\r\n-                  <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n-                    <div className=\"flex space-x-4\">\r\n-                      <button\r\n-                        onClick={() => {\r\n-                          setSelectedSchool(school);\r\n-                          setIsAddBranchOpen(true);\r\n-                        }}\r\n-                        className=\"text-indigo-600 hover:text-indigo-700\"\r\n-                        aria-label=\"Add branch school\"\r\n-                        title=\"Add branch school\"\r\n-                      >\r\n-                        <Plus className=\"h-5 w-5\" />\r\n-                      </button>\r\n-                      <button\r\n-                        onClick={() => {\r\n-                          setEditingSchool(school);\r\n-                          setSelectedGrades(school.grades || []);\r\n-                        }}\r\n-                        className=\"text-gray-400 hover:text-gray-500\"\r\n-                      >\r\n-                        <Edit className=\"h-5 w-5\" />\r\n-                      </button>\r\n-                      <button\r\n-                        onClick={() => {\r\n-                          deleteSchool.mutate(school.id);\r\n-                        }}\r\n-                        className=\"text-red-400 hover:text-red-500\"\r\n-                      >\r\n-                        <Trash2 className=\"h-5 w-5\" />\r\n-                      </button>\r\n-                    </div>\r\n-                  </div>\r\n-                </div>\r\n-              </div>\r\n-              {/* Branches */}\r\n-              <div className=\"border-t border-gray-200\">\r\n-                <div className=\"px-4 py-3\">\r\n-                  <h3 className=\"text-sm font-medium text-gray-600\">Branches</h3>\r\n-                  <div className=\"mt-2 space-y-2\">\r\n-                    {schools\r\n-                      .filter((branch): branch is SchoolType => \r\n-                        isSchool(branch) && \r\n-                        branch.type === 'branch' && \r\n-                        branch.parentId === school.id\r\n-                      )\r\n-                      .map((branch) => (\r\n-                        <div\r\n-                          key={branch.id}\r\n-                          className=\"flex items-center justify-between p-2 bg-gray-50 rounded-md\"\r\n-                        >\r\n-                          <div>\r\n-                            <div className=\"text-sm font-medium text-gray-900\">\r\n-                              {branch.name}\r\n-                            </div>\r\n-                            <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n-                          </div>\r\n-                          <div className=\"flex space-x-2\">\r\n-                            <button\r\n-                              onClick={() => {\r\n-                                setEditingSchool(branch);\r\n-                                setSelectedGrades(branch.grades || []);\r\n-                              }}\r\n-                              className=\"text-gray-400 hover:text-gray-500\"\r\n-                            >\r\n-                              <Edit className=\"h-4 w-4\" />\r\n-                            </button>\r\n-                            <button\r\n-                              onClick={() => {\r\n-                                deleteSchool.mutate(branch.id);\r\n-                              }}\r\n-                              className=\"text-red-400 hover:text-red-500\"\r\n-                            >\r\n-                              <Trash2 className=\"h-4 w-4\" />\r\n-                            </button>\r\n-                          </div>\r\n-                        </div>\r\n-                      ))}\r\n-                  </div>\r\n-                </div>\r\n-              </div>\r\n-            </div>\r\n-          ))}\r\n-      </div>\r\n-\r\n-      {/* Add School Modal */}\r\n-      {isAddModalOpen && (\r\n-        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center overflow-y-auto\">\r\n-          <div className=\"bg-white rounded-lg max-w-md w-full my-8 mx-4\">\r\n-            <div className=\"p-6 border-b\">\r\n-              <h2 className=\"text-lg font-medium\">Add New School</h2>\r\n-            </div>\r\n-            <ScrollArea className=\"h-[60vh]\">\r\n-              <div className=\"p-6\">\r\n-              <form\r\n-                id=\"addSchoolForm\"\r\n-                onSubmit={(e) => {\r\n-                  e.preventDefault();\r\n-                  handleAddSchool(new FormData(e.currentTarget));\r\n-                }}\r\n-              >\r\n-                <div className=\"space-y-4\">\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      School Name\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"text\"\r\n-                      name=\"name\"\r\n-                      required\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                      placeholder=\"Enter school name\"\r\n-                    />\r\n-                  </div>\r\n-                  <div className=\"space-y-2\">\r\n-                    <LocationSearch\r\n-                      onLocationSelect={({ lat, lng, address }) => {\r\n-                        const form = document.getElementById('addSchoolForm') as HTMLFormElement;\r\n-                        if (form) {\r\n-                          (form.elements.namedItem('latitude') as HTMLInputElement).value = lat.toString();\r\n-                          (form.elements.namedItem('longitude') as HTMLInputElement).value = lng.toString();\r\n-                          (form.elements.namedItem('address') as HTMLInputElement).value = address;\r\n-                        }\r\n-                      }}\r\n-                    />\r\n-                    <input type=\"hidden\" name=\"latitude\" required />\r\n-                    <input type=\"hidden\" name=\"longitude\" required />\r\n-                    <input type=\"hidden\" name=\"address\" required />\r\n-                  </div>\r\n-                  <div className=\"mt-4\">\r\n-                    <GradeSelector\r\n-                      selectedGrades={selectedGrades}\r\n-                      onChange={setSelectedGrades}\r\n-                    />\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      Principal Name\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"text\"\r\n-                      name=\"principalName\"\r\n-                      required\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                      placeholder=\"Enter principal's name\"\r\n-                    />\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      Contact Number\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"tel\"\r\n-                      name=\"contactNumber\"\r\n-                      required\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                      placeholder=\"Enter contact number\"\r\n-                    />\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      Email\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"email\"\r\n-                      name=\"email\"\r\n-                      required\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                      placeholder=\"Enter email address\"\r\n-                    />\r\n-                  </div>\r\n-                  <div>\r\n-                    <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700\">\r\n-                      Status\r\n-                    </label>\r\n-                    <select\r\n-                      id=\"status\"\r\n-                      name=\"status\"\r\n-                      required\r\n-                      aria-label=\"School Status\"\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    >\r\n-                      <option value=\"active\">Active</option>\r\n-                      <option value=\"inactive\">Inactive</option>\r\n-                    </select>\r\n-                  </div>\r\n-                  <div>\r\n-                    <label htmlFor=\"capacity\" className=\"block text-sm font-medium text-gray-700\">\r\n-                      Student Capacity\r\n-                    </label>\r\n-                    <input\r\n-                      id=\"capacity\"\r\n-                      type=\"number\"\r\n-                      name=\"capacity\"\r\n-                      placeholder=\"Enter total student capacity\"\r\n-                      aria-label=\"Student Capacity\"\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                      required\r\n-                    />\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      School Type\r\n-                    </label>\r\n-                    <select\r\n-                      id=\"schoolType\"\r\n-                      name=\"schoolType\"\r\n-                      required\r\n-                      aria-label=\"School Type\"\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    >\r\n-                      <option value=\"public\">Public</option>\r\n-                      <option value=\"private\">Private</option>\r\n-                      <option value=\"charter\">Charter</option>\r\n-                      <option value=\"religious\">Religious</option>\r\n-                      <option value=\"other\">Other</option>\r\n-                    </select>\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      School Level\r\n-                    </label>\r\n-                    <select\r\n-                      name=\"schoolLevel\"\r\n-                      required\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    >\r\n-                      <option value=\"elementary\">Elementary</option>\r\n-                      <option value=\"middle\">Middle</option>\r\n-                      <option value=\"high\">High</option>\r\n-                      <option value=\"other\">Other</option>\r\n-                    </select>\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      Leader Email\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"email\"\r\n-                      name=\"leaderEmail\"\r\n-                      required\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                      placeholder=\"Leader's email address\"\r\n-                    />\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      Leader Phone\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"tel\"\r\n-                      name=\"leaderPhone\"\r\n-                      required\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                      placeholder=\"Leader's phone number\"\r\n-                    />\r\n-                  </div>\r\n-                </div>\r\n-              </form>\r\n-              </div>\r\n-            </ScrollArea>\r\n-            <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n-              <div className=\"flex space-x-3\">\r\n-                <button\r\n-                  type=\"submit\"\r\n-                  form=\"addSchoolForm\"\r\n-                  className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n-                >\r\n-                  Add School\r\n-                </button>\r\n-                <button\r\n-                  type=\"button\"\r\n-                  onClick={() => setIsAddModalOpen(false)}\r\n-                  className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n-                >\r\n-                  Cancel\r\n-                </button>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      )}\r\n-\r\n-      {/* Add Branch Modal */}\r\n-      {isAddBranchOpen && selectedSchool && (\r\n-        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center\">\r\n-          <div className=\"bg-white rounded-lg max-w-md w-full max-h-[90vh] flex flex-col\">\r\n-            <div className=\"p-6\">\r\n-              <h2 className=\"text-lg font-medium mb-4\">\r\n-                Add Branch for {selectedSchool.name}\r\n-              </h2>\r\n-            </div>\r\n-            <div className=\"flex-1 overflow-y-auto px-6\">\r\n-            <form\r\n-              id=\"addBranchForm\"\r\n-              onSubmit={(e) => {\r\n-                e.preventDefault();\r\n-                const formData = new FormData(e.currentTarget);\r\n-                handleAddBranch(formData);\r\n-              }}\r\n-            >\r\n-              <div className=\"space-y-4\">\r\n-                <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n-                    Branch Name\r\n-                  </label>\r\n-                  <input\r\n-                    type=\"text\"\r\n-                    name=\"name\"\r\n-                    required\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    placeholder=\"Enter branch name\"\r\n-                  />\r\n-                </div>\r\n-                <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n-                    Address\r\n-                  </label>\r\n-                  <input\r\n-                    type=\"text\"\r\n-                    name=\"address\"\r\n-                    required\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    placeholder=\"Enter complete address\"\r\n-                  />\r\n-                </div>\r\n-                <div className=\"grid grid-cols-2 gap-4\">\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700\">\r\n-                      Location\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"number\"\r\n-                      step=\"any\"\r\n-                      name=\"latitude\"\r\n-                      required\r\n-                      placeholder=\"Latitude (e.g., 51.5074)\"\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    />\r\n-                  </div>\r\n-                  <div>\r\n-                    <label className=\"block text-sm font-medium text-gray-700 opacity-0\">\r\n-                      Location\r\n-                    </label>\r\n-                    <input\r\n-                      type=\"number\"\r\n-                      step=\"any\"\r\n-                      name=\"longitude\"\r\n-                      required\r\n-                      placeholder=\"Longitude (e.g., -0.1278)\"\r\n-                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    />\r\n-                  </div>\r\n-                </div>\r\n-                <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n-                    Principal Name\r\n-                  </label>\r\n-                  <input\r\n-                    type=\"text\"\r\n-                    name=\"principalName\"\r\n-                    required\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    placeholder=\"Enter principal's name\"\r\n-                  />\r\n-                </div>\r\n-                <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n-                    Contact Number\r\n-                  </label>\r\n-                  <input\r\n-                    type=\"tel\"\r\n-                    name=\"contactNumber\"\r\n-                    required\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    placeholder=\"Enter contact number\"\r\n-                  />\r\n-                </div>\r\n-                <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n-                    Email\r\n-                  </label>\r\n-                  <input\r\n-                    type=\"email\"\r\n-                    name=\"email\"\r\n-                    required\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    placeholder=\"Enter email address\"\r\n-                  />\r\n-                </div>\r\n-                <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n-                    Status\r\n-                  </label>\r\n-                  <select\r\n-                    name=\"status\"\r\n-                    required\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                  >\r\n-                    <option value=\"active\">Active</option>\r\n-                    <option value=\"inactive\">Inactive</option>\r\n-                  </select>\r\n-                </div>\r\n-                <div>\r\n-                  <label className=\"block text-sm font-medium text-gray-700\">\r\n-                    Student Capacity\r\n-                  </label>\r\n-                  <input\r\n-                    type=\"number\"\r\n-                    name=\"capacity\"\r\n-                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n-                    required\r\n-                  />\r\n-                </div>\r\n-              </div>\r\n-            </form>\r\n-            </div>\r\n-            <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n-              <div className=\"flex space-x-3\">\r\n-                <button\r\n-                  type=\"submit\"\r\n-                  form=\"addBranchForm\"\r\n-                  className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n-                >\r\n-                  Add Branch\r\n-                </button>\r\n-                <button\r\n-                  type=\"button\"\r\n-                  onClick={() => {\r\n-                    setIsAddBranchOpen(false);\r\n-                    setSelectedSchool(null);\r\n-                  }}\r\n-                  className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n-                >\r\n-                  Cancel\r\n-                </button>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      )}\r\n-      \r\n-      {/* Edit School Dialog */}\r\n-      {editingSchool && (\r\n-        <EditSchoolDialog\r\n-          school={editingSchool}\r\n-          selectedGrades={selectedGrades}\r\n-          onGradesChange={setSelectedGrades}\r\n-          onSave={handleEditSchool}\r\n-          onCancel={() => {\r\n-            setEditingSchool(null);\r\n-            setSelectedGrades([]);\r\n-          }}\r\n-          open={!!editingSchool}\r\n-        />\r\n-      )}\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n export default Schools;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739440979753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-\"use client\";\r\n+'use client\";\r\n \r\n import React, { useState } from 'react';\r\n import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n import type { School as SchoolType } from '../types';\r\n"
                },
                {
                    "date": 1739440987244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,4 @@\n-'use client\";\r\n \r\n import React, { useState } from 'react';\r\n import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n import type { School as SchoolType } from '../types';\r\n"
                },
                {
                    "date": 1740926492430,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,4 @@\n-\r\n import React, { useState } from 'react';\r\n import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n import type { School as SchoolType } from '../types';\r\n import LocationSearch from '../components/LocationSearch';\r\n"
                },
                {
                    "date": 1740926505602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+\r\n import React, { useState } from 'react';\r\n import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n import type { School as SchoolType } from '../types';\r\n import LocationSearch from '../components/LocationSearch';\r\n"
                },
                {
                    "date": 1740926514919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n \r\n-import React, { useState } from 'react';\r\n+import { useState } from 'react';\r\n import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n import type { School as SchoolType } from '../types';\r\n import LocationSearch from '../components/LocationSearch';\r\n import EditSchoolDialog from '../components/EditSchoolDialog';\r\n@@ -9,9 +9,9 @@\n import GradeSelector from '../components/GradeSelector';\r\n import { useSchools } from '../hooks/useSchools';\r\n import { useToast } from '@/components/ui/use-toast';\r\n import LoadingSpinner from '../components/LoadingSpinner';\r\n-import { Dialog } from '@/components/ui/dialog';\r\n+//import { Dialog } from '@/components/ui/dialog';\r\n \r\n const isSchool = (school: unknown): school is SchoolType => {\r\n   return typeof school === 'object' && school !== null && 'type' in school && 'id' in school;\r\n };\r\n"
                },
                {
                    "date": 1740926522537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n   const [selectedSchool, setSelectedSchool] = useState<SchoolType | null>(null);\r\n   const [isAddBranchOpen, setIsAddBranchOpen] = useState(false);\r\n   const [editingSchool, setEditingSchool] = useState<SchoolType | null>(null);\r\n   const [selectedGrades, setSelectedGrades] = useState<string[]>([]);\r\n-  const [isLoading, setIsLoading] = useState(false);\r\n+  const [_isLoading, setIsLoading] = useState(false);\r\n \r\n   const handleEditSchool = (updatedSchool: SchoolType) => {\r\n     console.log('Updating school:', updatedSchool);\r\n     updateSchool.mutate(updatedSchool);\r\n"
                },
                {
                    "date": 1740926538071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,8 @@\n       }\r\n     } catch (err) {\r\n       setError(err instanceof Error ? err.message : 'Failed to add school');\r\n       toast({\r\n-        variant: \"destructive\",\r\n         title: \"Error\",\r\n         description: \"Failed to add school\",\r\n       });\r\n     } finally {\r\n"
                },
                {
                    "date": 1740926543746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,8 +190,9 @@\n       <div className=\"flex justify-between items-center mb-6\">\r\n         <h1 className=\"text-2xl font-semibold text-gray-900\">Schools</h1>\r\n         <div className=\"flex space-x-4\">\r\n           <button\r\n+          \r\n             onClick={() => setIsAddModalOpen(true)}\r\n             className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n           >\r\n             <Plus className=\"h-4 w-4 mr-2\" />\r\n"
                },
                {
                    "date": 1740926557379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,9 +190,10 @@\n       <div className=\"flex justify-between items-center mb-6\">\r\n         <h1 className=\"text-2xl font-semibold text-gray-900\">Schools</h1>\r\n         <div className=\"flex space-x-4\">\r\n           <button\r\n-          \r\n+            title=\"Add School\"\r\n+            type=\"button\"\r\n             onClick={() => setIsAddModalOpen(true)}\r\n             className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n           >\r\n             <Plus className=\"h-4 w-4 mr-2\" />\r\n@@ -239,8 +240,10 @@\n                   </div>\r\n                   <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n                     <div className=\"flex space-x-4\">\r\n                       <button\r\n+                        title=\"Add branch school\"\r\n+                        type=\"button\"\r\n                         onClick={() => {\r\n                           setSelectedSchool(school);\r\n                           setIsAddBranchOpen(true);\r\n                         }}\r\n"
                },
                {
                    "date": 1740926564564,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -253,8 +253,10 @@\n                       >\r\n                         <Plus className=\"h-5 w-5\" />\r\n                       </button>\r\n                       <button\r\n+                        title=\"Edit school\"\r\n+                        type=\"button\"\r\n                         onClick={() => {\r\n                           setEditingSchool(school);\r\n                           setSelectedGrades(school.grades || []);\r\n                         }}\r\n"
                },
                {
                    "date": 1740926570016,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -248,9 +248,9 @@\n                           setIsAddBranchOpen(true);\r\n                         }}\r\n                         className=\"text-indigo-600 hover:text-indigo-700\"\r\n                         aria-label=\"Add branch school\"\r\n-                        title=\"Add branch school\"\r\n+                        \r\n                       >\r\n                         <Plus className=\"h-5 w-5\" />\r\n                       </button>\r\n                       <button\r\n"
                },
                {
                    "date": 1740926584250,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -248,9 +248,8 @@\n                           setIsAddBranchOpen(true);\r\n                         }}\r\n                         className=\"text-indigo-600 hover:text-indigo-700\"\r\n                         aria-label=\"Add branch school\"\r\n-                        \r\n                       >\r\n                         <Plus className=\"h-5 w-5\" />\r\n                       </button>\r\n                       <button\r\n@@ -299,8 +298,9 @@\n                             <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n                           </div>\r\n                           <div className=\"flex space-x-2\">\r\n                             <button\r\n+                            \r\n                               onClick={() => {\r\n                                 setEditingSchool(branch);\r\n                                 setSelectedGrades(branch.grades || []);\r\n                               }}\r\n"
                },
                {
                    "date": 1740926590331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -298,9 +298,9 @@\n                             <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n                           </div>\r\n                           <div className=\"flex space-x-2\">\r\n                             <button\r\n-                            \r\n+                            t\r\n                               onClick={() => {\r\n                                 setEditingSchool(branch);\r\n                                 setSelectedGrades(branch.grades || []);\r\n                               }}\r\n"
                },
                {
                    "date": 1740926603929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -298,9 +298,9 @@\n                             <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n                           </div>\r\n                           <div className=\"flex space-x-2\">\r\n                             <button\r\n-                            t\r\n+                            title = \r\n                               onClick={() => {\r\n                                 setEditingSchool(branch);\r\n                                 setSelectedGrades(branch.grades || []);\r\n                               }}\r\n"
                },
                {
                    "date": 1740926613076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -298,9 +298,9 @@\n                             <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n                           </div>\r\n                           <div className=\"flex space-x-2\">\r\n                             <button\r\n-                            title = \r\n+                            \r\n                               onClick={() => {\r\n                                 setEditingSchool(branch);\r\n                                 setSelectedGrades(branch.grades || []);\r\n                               }}\r\n"
                },
                {
                    "date": 1740926618678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -298,9 +298,10 @@\n                             <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n                           </div>\r\n                           <div className=\"flex space-x-2\">\r\n                             <button\r\n-                            \r\n+                              title=\"Edit branch school\"\r\n+                              type=\"button\"\r\n                               onClick={() => {\r\n                                 setEditingSchool(branch);\r\n                                 setSelectedGrades(branch.grades || []);\r\n                               }}\r\n@@ -308,8 +309,10 @@\n                             >\r\n                               <Edit className=\"h-4 w-4\" />\r\n                             </button>\r\n                             <button\r\n+                              title=\"Delete branch school\"\r\n+                              type=\"button\"\r\n                               onClick={() => {\r\n                                 deleteSchool.mutate(branch.id);\r\n                               }}\r\n                               className=\"text-red-400 hover:text-red-500\"\r\n"
                },
                {
                    "date": 1740926636568,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -509,8 +509,9 @@\n             </ScrollArea>\r\n             <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n               <div className=\"flex space-x-3\">\r\n                 <button\r\n+                  title=\"Add School\"\r\n                   type=\"submit\"\r\n                   form=\"addSchoolForm\"\r\n                   className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                 >\r\n"
                },
                {
                    "date": 1740926642922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -517,8 +517,9 @@\n                 >\r\n                   Add School\r\n                 </button>\r\n                 <button\r\n+                  title=\"Cancel\"\r\n                   type=\"button\"\r\n                   onClick={() => setIsAddModalOpen(false)}\r\n                   className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                 >\r\n"
                },
                {
                    "date": 1740926657642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -672,8 +672,9 @@\n             </div>\r\n             <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n               <div className=\"flex space-x-3\">\r\n                 <button\r\n+                  title=\"Add Branch\"\r\n                   type=\"submit\"\r\n                   form=\"addBranchForm\"\r\n                   className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                 >\r\n"
                },
                {
                    "date": 1740926732713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,4 @@\n-\r\n import { useState } from 'react';\r\n import { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\n import type { School as SchoolType } from '../types';\r\n import LocationSearch from '../components/LocationSearch';\r\n@@ -266,8 +265,9 @@\n                       <button\r\n                         onClick={() => {\r\n                           deleteSchool.mutate(school.id);\r\n                         }}\r\n+                        title=\"Delete school\"\r\n                         className=\"text-red-400 hover:text-red-500\"\r\n                       >\r\n                         <Trash2 className=\"h-5 w-5\" />\r\n                       </button>\r\n@@ -680,8 +680,9 @@\n                 >\r\n                   Add Branch\r\n                 </button>\r\n                 <button\r\n+                  title=\"Cancel\"\r\n                   type=\"button\"\r\n                   onClick={() => {\r\n                     setIsAddBranchOpen(false);\r\n                     setSelectedSchool(null);\r\n"
                }
            ],
            "date": 1739440467940,
            "name": "Commit-0",
            "content": "\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { School, Plus, Edit, Trash2, MapPin, Phone, Mail, User } from 'lucide-react';\r\nimport type { School as SchoolType } from '../types';\r\nimport LocationSearch from '../components/LocationSearch';\r\nimport EditSchoolDialog from '../components/EditSchoolDialog';\r\nimport { ScrollArea } from '../components/ui/scroll-area';\r\nimport { useError } from '../hooks/useError';\r\nimport GradeSelector from '../components/GradeSelector';\r\nimport { useSchools } from '../hooks/useSchools';\r\nimport { useToast } from '@/components/ui/use-toast';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport { Dialog } from '@/components/ui/dialog';\r\n\r\nconst isSchool = (school: unknown): school is SchoolType => {\r\n  return typeof school === 'object' && school !== null && 'type' in school && 'id' in school;\r\n};\r\n\r\nconst Schools = () => {\r\n  const { schools, loading, error, addSchool, updateSchool, deleteSchool } = useSchools();\r\n  const { setError } = useError();\r\n  const { toast } = useToast();\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [selectedSchool, setSelectedSchool] = useState<SchoolType | null>(null);\r\n  const [isAddBranchOpen, setIsAddBranchOpen] = useState(false);\r\n  const [editingSchool, setEditingSchool] = useState<SchoolType | null>(null);\r\n  const [selectedGrades, setSelectedGrades] = useState<string[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleEditSchool = (updatedSchool: SchoolType) => {\r\n    console.log('Updating school:', updatedSchool);\r\n    updateSchool.mutate(updatedSchool);\r\n    setEditingSchool(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner message=\"Loading schools...\" />;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n        <h3 className=\"text-lg font-medium text-red-800\">Error</h3>\r\n        <p className=\"mt-2 text-sm text-red-600\">{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleAddSchool = async (formData: FormData) => {\r\n    const latitude = parseFloat(formData.get('latitude') as string);\r\n    const longitude = parseFloat(formData.get('longitude') as string);\r\n    const address = formData.get('address') as string;\r\n    \r\n    // Validate form data\r\n    if (isNaN(latitude) || isNaN(longitude)) {\r\n      setError('Please select a valid location');\r\n      return;\r\n    }\r\n    \r\n    if (!address) {\r\n      setError('Please enter a valid address');\r\n      return;\r\n    }\r\n\r\n    // Create school object\r\n    const newSchool: Omit<SchoolType, 'id'> = {\r\n      name: formData.get('name') as string,\r\n      type: 'main' as const,\r\n      address,\r\n      latitude,\r\n      longitude,\r\n      contactNumber: formData.get('contactNumber') as string,\r\n      email: formData.get('email') as string,\r\n      status: formData.get('status') as 'active' | 'inactive',\r\n      capacity: {\r\n        total: parseInt(formData.get('capacity') as string),\r\n        current: 0\r\n      },\r\n      principalName: formData.get('principalName') as string,\r\n      grades: selectedGrades,\r\n      schoolType: formData.get('schoolType') as 'public' | 'private' | 'charter' | 'religious' | 'other',\r\n      schoolLevel: formData.get('schoolLevel') as 'elementary' | 'middle' | 'high' | 'other',\r\n      schoolLeader: formData.get('principalName') as string,\r\n      schoolLeaderTitle: 'Principal',\r\n      schoolLeaderEmail: formData.get('leaderEmail') as string,\r\n      schoolLeaderPhone: formData.get('leaderPhone') as string,\r\n      operatingHours: {\r\n        monday: { open: '8:00 AM', close: '3:00 PM' },\r\n        tuesday: { open: '8:00 AM', close: '3:00 PM' },\r\n        wednesday: { open: '8:00 AM', close: '3:00 PM' },\r\n        thursday: { open: '8:00 AM', close: '3:00 PM' },\r\n        friday: { open: '8:00 AM', close: '3:00 PM' },\r\n        saturday: { open: '8:00 AM', close: '12:00 PM' },\r\n        sunday: { open: 'Closed', close: 'Closed', isHoliday: true }\r\n      },\r\n      facilities: ['classroom', 'library'],\r\n      curriculumType: ['standard'],\r\n      languagesOffered: ['english'],\r\n      transportationProvided: false,\r\n      extracurricularActivities: [],\r\n      classes: [],\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString(),\r\n      studentCount: 0,\r\n      staffCount: 0,\r\n      classroomCount: 0,\r\n      isBoarding: false\r\n    };\r\n    try {\r\n      // Show loading state\r\n      setIsLoading(true);\r\n\r\n      const result = await addSchool.mutateAsync(newSchool);\r\n      if (result) {\r\n        setIsAddModalOpen(false);\r\n        setSelectedGrades([]);\r\n        setError(null);\r\n        \r\n        // Show success message\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"School added successfully\",\r\n        });\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to add school');\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Error\",\r\n        description: \"Failed to add school\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddBranch = async (formData: FormData) => {\r\n    if (selectedSchool) {\r\n      const newBranch: Omit<SchoolType, 'id'> = {\r\n        name: formData.get('name') as string,\r\n        type: 'branch' as const,\r\n        address: formData.get('address') as string,\r\n        latitude: parseFloat(formData.get('latitude') as string),\r\n        longitude: parseFloat(formData.get('longitude') as string),\r\n        contact_number: formData.get('contactNumber') as string,\r\n        email: formData.get('email') as string,\r\n        status: formData.get('status') as 'active' | 'inactive',\r\n        capacity: {\r\n          total: parseInt(formData.get('capacity') as string),\r\n          current: 0\r\n        },\r\n        principal_name: formData.get('principalName') as string,\r\n        schoolType: formData.get('schoolType') as 'public' | 'private' | 'charter' | 'religious' | 'other',\r\n        schoolLevel: formData.get('schoolLevel') as 'elementary' | 'middle' | 'high' | 'other',\r\n        schoolLeader: formData.get('principalName') as string,\r\n        schoolLeaderTitle: 'Principal',\r\n        schoolLeaderEmail: formData.get('leaderEmail') as string,\r\n        schoolLeaderPhone: formData.get('leaderPhone') as string,\r\n        operatingHours: {\r\n          monday: { open: '8:00 AM', close: '3:00 PM' },\r\n          tuesday: { open: '8:00 AM', close: '3:00 PM' },\r\n          wednesday: { open: '8:00 AM', close: '3:00 PM' },\r\n          thursday: { open: '8:00 AM', close: '3:00 PM' },\r\n          friday: { open: '8:00 AM', close: '3:00 PM' },\r\n          saturday: { open: '8:00 AM', close: '12:00 PM' },\r\n          sunday: { open: 'Closed', close: 'Closed', isHoliday: true }\r\n        },\r\n        facilities: ['classroom', 'library'],\r\n        curriculumType: ['standard'],\r\n        languagesOffered: ['english'],\r\n        transportationProvided: false,\r\n        extracurricularActivities: [],\r\n        classes: [],\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString(),\r\n        studentCount: 0,\r\n        staffCount: 0,\r\n        classroomCount: 0,\r\n        isBoarding: false,\r\n        parentId: selectedSchool.id,\r\n        grades: selectedGrades\r\n      };\r\n      await addSchool.mutateAsync(newBranch);\r\n      setIsAddBranchOpen(false);\r\n      setSelectedGrades([]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-semibold text-gray-900\">Schools</h1>\r\n        <div className=\"flex space-x-4\">\r\n          <button\r\n            onClick={() => setIsAddModalOpen(true)}\r\n            className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n          >\r\n            <Plus className=\"h-4 w-4 mr-2\" />\r\n            Add School\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\r\n        {schools\r\n          .filter((school): school is SchoolType => {\r\n            if (!isSchool(school)) return false;\r\n            return school.type !== 'branch';\r\n          })\r\n          .map((school) => (\r\n            <div key={school.id} className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n              <div className=\"px-4 py-4 flex items-center sm:px-6\">\r\n                <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\r\n                  <div>\r\n                    <div className=\"flex items-center\">\r\n                      <School className=\"h-6 w-6 text-indigo-600 mr-3\" />\r\n                      <div className=\"text-lg font-medium text-indigo-600\">\r\n                        {school.name}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-4 space-y-2\">\r\n                      <div className=\"flex items-center text-sm text-gray-600\">\r\n                        <MapPin className=\"h-4 w-4 mr-2\" />\r\n                        <span>{school.address}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center text-sm text-gray-600\">\r\n                        <Phone className=\"h-4 w-4 mr-2\" />\r\n                        <span>{school.contactNumber}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center text-sm text-gray-600\">\r\n                        <Mail className=\"h-4 w-4 mr-2\" />\r\n                        <span>{school.email}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center text-sm text-gray-600\">\r\n                        <User className=\"h-4 w-4 mr-2\" />\r\n                        <span>{school.principalName}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex-shrink-0 sm:mt-0\">\r\n                    <div className=\"flex space-x-4\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedSchool(school);\r\n                          setIsAddBranchOpen(true);\r\n                        }}\r\n                        className=\"text-indigo-600 hover:text-indigo-700\"\r\n                      >\r\n                        <Plus className=\"h-5 w-5\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          setEditingSchool(school);\r\n                          setSelectedGrades(school.grades || []);\r\n                        }}\r\n                        className=\"text-gray-400 hover:text-gray-500\"\r\n                      >\r\n                        <Edit className=\"h-5 w-5\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          deleteSchool.mutate(school.id);\r\n                        }}\r\n                        className=\"text-red-400 hover:text-red-500\"\r\n                      >\r\n                        <Trash2 className=\"h-5 w-5\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {/* Branches */}\r\n              <div className=\"border-t border-gray-200\">\r\n                <div className=\"px-4 py-3\">\r\n                  <h3 className=\"text-sm font-medium text-gray-600\">Branches</h3>\r\n                  <div className=\"mt-2 space-y-2\">\r\n                    {schools\r\n                      .filter((branch): branch is SchoolType => \r\n                        isSchool(branch) && \r\n                        branch.type === 'branch' && \r\n                        branch.parentId === school.id\r\n                      )\r\n                      .map((branch) => (\r\n                        <div\r\n                          key={branch.id}\r\n                          className=\"flex items-center justify-between p-2 bg-gray-50 rounded-md\"\r\n                        >\r\n                          <div>\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {branch.name}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500\">{branch.address}</div>\r\n                          </div>\r\n                          <div className=\"flex space-x-2\">\r\n                            <button\r\n                              onClick={() => {\r\n                                setEditingSchool(branch);\r\n                                setSelectedGrades(branch.grades || []);\r\n                              }}\r\n                              className=\"text-gray-400 hover:text-gray-500\"\r\n                            >\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </button>\r\n                            <button\r\n                              onClick={() => {\r\n                                deleteSchool.mutate(branch.id);\r\n                              }}\r\n                              className=\"text-red-400 hover:text-red-500\"\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n\r\n      {/* Add School Modal */}\r\n      {isAddModalOpen && (\r\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center overflow-y-auto\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full my-8 mx-4\">\r\n            <div className=\"p-6 border-b\">\r\n              <h2 className=\"text-lg font-medium\">Add New School</h2>\r\n            </div>\r\n            <ScrollArea className=\"h-[60vh]\">\r\n              <div className=\"p-6\">\r\n              <form\r\n                id=\"addSchoolForm\"\r\n                onSubmit={(e) => {\r\n                  e.preventDefault();\r\n                  handleAddSchool(new FormData(e.currentTarget));\r\n                }}\r\n              >\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      School Name\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                      placeholder=\"Enter school name\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <LocationSearch\r\n                      onLocationSelect={({ lat, lng, address }) => {\r\n                        const form = document.getElementById('addSchoolForm') as HTMLFormElement;\r\n                        if (form) {\r\n                          (form.elements.namedItem('latitude') as HTMLInputElement).value = lat.toString();\r\n                          (form.elements.namedItem('longitude') as HTMLInputElement).value = lng.toString();\r\n                          (form.elements.namedItem('address') as HTMLInputElement).value = address;\r\n                        }\r\n                      }}\r\n                    />\r\n                    <input type=\"hidden\" name=\"latitude\" required />\r\n                    <input type=\"hidden\" name=\"longitude\" required />\r\n                    <input type=\"hidden\" name=\"address\" required />\r\n                  </div>\r\n                  <div className=\"mt-4\">\r\n                    <GradeSelector\r\n                      selectedGrades={selectedGrades}\r\n                      onChange={setSelectedGrades}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Principal Name\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"principalName\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                      placeholder=\"Enter principal's name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Contact Number\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"contactNumber\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                      placeholder=\"Enter contact number\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Email\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                      placeholder=\"Enter email address\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Status\r\n                    </label>\r\n                    <select\r\n                      name=\"status\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    >\r\n                      <option value=\"active\">Active</option>\r\n                      <option value=\"inactive\">Inactive</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Student Capacity\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      name=\"capacity\"\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      School Type\r\n                    </label>\r\n                    <select\r\n                      name=\"schoolType\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    >\r\n                      <option value=\"public\">Public</option>\r\n                      <option value=\"private\">Private</option>\r\n                      <option value=\"charter\">Charter</option>\r\n                      <option value=\"religious\">Religious</option>\r\n                      <option value=\"other\">Other</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      School Level\r\n                    </label>\r\n                    <select\r\n                      name=\"schoolLevel\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    >\r\n                      <option value=\"elementary\">Elementary</option>\r\n                      <option value=\"middle\">Middle</option>\r\n                      <option value=\"high\">High</option>\r\n                      <option value=\"other\">Other</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Leader Email\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"leaderEmail\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                      placeholder=\"Leader's email address\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Leader Phone\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"leaderPhone\"\r\n                      required\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                      placeholder=\"Leader's phone number\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </form>\r\n              </div>\r\n            </ScrollArea>\r\n            <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  type=\"submit\"\r\n                  form=\"addSchoolForm\"\r\n                  className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                >\r\n                  Add School\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setIsAddModalOpen(false)}\r\n                  className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add Branch Modal */}\r\n      {isAddBranchOpen && selectedSchool && (\r\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full max-h-[90vh] flex flex-col\">\r\n            <div className=\"p-6\">\r\n              <h2 className=\"text-lg font-medium mb-4\">\r\n                Add Branch for {selectedSchool.name}\r\n              </h2>\r\n            </div>\r\n            <div className=\"flex-1 overflow-y-auto px-6\">\r\n            <form\r\n              id=\"addBranchForm\"\r\n              onSubmit={(e) => {\r\n                e.preventDefault();\r\n                const formData = new FormData(e.currentTarget);\r\n                handleAddBranch(formData);\r\n              }}\r\n            >\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Branch Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    required\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    placeholder=\"Enter branch name\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Address\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"address\"\r\n                    required\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    placeholder=\"Enter complete address\"\r\n                  />\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">\r\n                      Location\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"any\"\r\n                      name=\"latitude\"\r\n                      required\r\n                      placeholder=\"Latitude (e.g., 51.5074)\"\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 opacity-0\">\r\n                      Location\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"any\"\r\n                      name=\"longitude\"\r\n                      required\r\n                      placeholder=\"Longitude (e.g., -0.1278)\"\r\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Principal Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"principalName\"\r\n                    required\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    placeholder=\"Enter principal's name\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Contact Number\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    name=\"contactNumber\"\r\n                    required\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    placeholder=\"Enter contact number\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Email\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    required\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    placeholder=\"Enter email address\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Status\r\n                  </label>\r\n                  <select\r\n                    name=\"status\"\r\n                    required\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  >\r\n                    <option value=\"active\">Active</option>\r\n                    <option value=\"inactive\">Inactive</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Student Capacity\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    name=\"capacity\"\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n            </form>\r\n            </div>\r\n            <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  type=\"submit\"\r\n                  form=\"addBranchForm\"\r\n                  className=\"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                >\r\n                  Add Branch\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setIsAddBranchOpen(false);\r\n                    setSelectedSchool(null);\r\n                  }}\r\n                  className=\"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Edit School Dialog */}\r\n      {editingSchool && (\r\n        <EditSchoolDialog\r\n          school={editingSchool}\r\n          selectedGrades={selectedGrades}\r\n          onGradesChange={setSelectedGrades}\r\n          onSave={handleEditSchool}\r\n          onCancel={() => {\r\n            setEditingSchool(null);\r\n            setSelectedGrades([]);\r\n          }}\r\n          open={!!editingSchool}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Schools;"
        }
    ]
}